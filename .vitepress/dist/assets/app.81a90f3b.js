import{d as R,_ as V,o as S,c as j,k as A,K as je,L as De,t as W,h as $,C as Le,z as Me,a5 as Qe,E as re,a6 as $e,j as ae,J as xe,e as Pe,N as ne,n as ze,b as he,u as Te,l as pe,p as Ge,m as Ze,G as Xe,g as Ie,I as et,a7 as tt,w as ue,a8 as nt,a9 as fe,aa as st,ab as Ce,W as ve,ac as it,ad as rt,ae as at,af as ot,ag as ct,ah as ut,ai as dt,aj as lt,ak as ht,al as pt,Z as ft,A as vt,am as bt,an as mt,ao as wt}from"./chunks/framework.af8f98c2.js";import{t as be}from"./chunks/theme.bebdbc1b.js";import{s as yt,t as _t,B as gt}from"./chunks/toast.81b6605c.js";var q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),n}var F={exports:{}};const Tt={},kt=Object.freeze(Object.defineProperty({__proto__:null,default:Tt},Symbol.toStringTag,{value:"Module"})),oe=Pt(kt),At="dotenv",Ot="16.3.1",St="Loads environment variables from .env file",Et="lib/main.js",It="lib/main.d.ts",Ct={".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},jt={"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},Dt={type:"git",url:"git://github.com/motdotla/dotenv.git"},Lt="https://github.com/motdotla/dotenv?sponsor=1",Mt=["dotenv","env",".env","environment","variables","config","settings"],$t="README.md",xt="BSD-2-Clause",zt={"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},Rt={node:">=12"},Bt={fs:!1},qt={name:At,version:Ot,description:St,main:Et,types:It,exports:Ct,scripts:jt,repository:Dt,funding:Lt,keywords:Mt,readmeFilename:$t,license:xt,devDependencies:zt,engines:Rt,browser:Bt},Re=oe,ke=oe,Ft=oe,Kt=oe,Nt=qt,Ae=Nt.version,Vt=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function Ut(t){const e={};let n=t.toString();n=n.replace(/\r\n?/mg,`
`);let s;for(;(s=Vt.exec(n))!=null;){const i=s[1];let r=s[2]||"";r=r.trim();const a=r[0];r=r.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),a==='"'&&(r=r.replace(/\\n/g,`
`),r=r.replace(/\\r/g,"\r")),e[i]=r}return e}function Ht(t){const e=qe(t),n=I.configDotenv({path:e});if(!n.parsed)throw new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);const s=Be(t).split(","),i=s.length;let r;for(let a=0;a<i;a++)try{const c=s[a].trim(),h=Jt(n,c);r=I.decrypt(h.ciphertext,h.key);break}catch(c){if(a+1>=i)throw c}return I.parse(r)}function Wt(t){console.log(`[dotenv@${Ae}][INFO] ${t}`)}function Yt(t){console.log(`[dotenv@${Ae}][WARN] ${t}`)}function me(t){console.log(`[dotenv@${Ae}][DEBUG] ${t}`)}function Be(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:{}.DOTENV_KEY&&{}.DOTENV_KEY.length>0?{}.DOTENV_KEY:""}function Jt(t,e){let n;try{n=new URL(e)}catch(c){throw c.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):c}const s=n.password;if(!s)throw new Error("INVALID_DOTENV_KEY: Missing key part");const i=n.searchParams.get("environment");if(!i)throw new Error("INVALID_DOTENV_KEY: Missing environment part");const r=`DOTENV_VAULT_${i.toUpperCase()}`,a=t.parsed[r];if(!a)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${r} in your .env.vault file.`);return{ciphertext:a,key:s}}function qe(t){let e=ke.resolve(process.cwd(),".env");return t&&t.path&&t.path.length>0&&(e=t.path),e.endsWith(".vault")?e:`${e}.vault`}function Qt(t){return t[0]==="~"?ke.join(Ft.homedir(),t.slice(1)):t}function Gt(t){Wt("Loading env from encrypted .env.vault");const e=I._parseVault(t);let n=process.env;return t&&t.processEnv!=null&&(n=t.processEnv),I.populate(n,e,t),{parsed:e}}function Zt(t){let e=ke.resolve(process.cwd(),".env"),n="utf8";const s=!!(t&&t.debug);t&&(t.path!=null&&(e=Qt(t.path)),t.encoding!=null&&(n=t.encoding));try{const i=I.parse(Re.readFileSync(e,{encoding:n}));let r=process.env;return t&&t.processEnv!=null&&(r=t.processEnv),I.populate(r,i,t),{parsed:i}}catch(i){return s&&me(`Failed to load ${e} ${i.message}`),{error:i}}}function Xt(t){const e=qe(t);return Be(t).length===0?I.configDotenv(t):Re.existsSync(e)?I._configVault(t):(Yt(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),I.configDotenv(t))}function en(t,e){const n=Buffer.from(e.slice(-64),"hex");let s=Buffer.from(t,"base64");const i=s.slice(0,12),r=s.slice(-16);s=s.slice(12,-16);try{const a=Kt.createDecipheriv("aes-256-gcm",n,i);return a.setAuthTag(r),`${a.update(s)}${a.final()}`}catch(a){const c=a instanceof RangeError,h=a.message==="Invalid key length",f=a.message==="Unsupported state or unable to authenticate data";if(c||h){const b="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(b)}else if(f){const b="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(b)}else throw console.error("Error: ",a.code),console.error("Error: ",a.message),a}}function tn(t,e,n={}){const s=!!(n&&n.debug),i=!!(n&&n.override);if(typeof e!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(const r of Object.keys(e))Object.prototype.hasOwnProperty.call(t,r)?(i===!0&&(t[r]=e[r]),s&&me(i===!0?`"${r}" is already defined and WAS overwritten`:`"${r}" is already defined and was NOT overwritten`)):t[r]=e[r]}const I={configDotenv:Zt,_configVault:Gt,_parseVault:Ht,config:Xt,decrypt:en,parse:Ut,populate:tn};F.exports.configDotenv=I.configDotenv;F.exports._configVault=I._configVault;F.exports._parseVault=I._parseVault;var nn=F.exports.config=I.config;F.exports.decrypt=I.decrypt;F.exports.parse=I.parse;F.exports.populate=I.populate;F.exports=I;function sn(t){return nn({path:`.${t}.env`}),{}.API_URL}async function we(t,e,n="prod"){const s=`${sn(n)}?projectName=${encodeURIComponent(t)}`,i=(r,a)=>r.find(c=>c.name===a);return await fetch(s).then(async r=>{if(!r.ok)throw new Error("Network response was not ok");const a=await r.json(),c=Object.values(a.pagesHtml);return i(c,e)}).catch(r=>{console.error("There has been a problem with your fetch operation:",r)})}const rn=R({name:"BDKDisconnectIcon",props:{size:{type:Number,default:24}}}),an={fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",height:"32",width:"32"},on=A("path",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.4753 18.2903H19.295H20.1146V21.5162V23.9355H15.1966L15.1967 27L13.0492 26.2799L8.11633 24.662C7.4459 24.433 7 24.2782 7 24.2782V7H8.63938C8.66196 7 8.68378 7.00459 8.70558 7.00919C8.72248 7.01275 8.73936 7.0163 8.75659 7.01772C8.76929 7.01605 8.78125 7.01267 8.79315 7.00931C8.80968 7.00464 8.8261 7 8.84424 7H17.6556H20.1146V11.8387H19.295H18.4753L18.4754 8.61267L17.6556 8.61281H13.8376H11.918L15.1966 9.41936V22.3226H18.4753V21.5162V18.2903ZM23.153 11.2686L27 15.0644C27 15.0644 26.7522 15.3194 26.4318 15.6346L23.153 18.8605L21.7541 20.2257L21.7539 15.8709H17.6556V15.0645V14.2581H21.7539L21.7541 9.90301L23.153 11.2686Z"},null,-1),cn=[on];function un(t,e,n,s,i,r){return S(),j("svg",an,cn)}const Fe=V(rn,[["render",un]]);var ce={},k={},Y={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueId=t.mergeTransactions=t.LT_COLLATOR=t.Semaphore=t.DelayedTransactions=t.MessageExpiredException=t.AddressLiteral=t.isAddressObject=t.Address=void 0;class e{constructor(d){this.equals=v=>this._equals(v),this._address=d}toString(){return this._address}toJSON(){return this._address}_equals(d){return typeof d=="string"?this._address===d:this._address===(d==null?void 0:d._address)}}t.Address=e;function n(l){return l!=null&&(l instanceof e||Object.getPrototypeOf(l).constructor.name===e.prototype.constructor.name)}t.isAddressObject=n;class s extends e{constructor(d){super(d)}}t.AddressLiteral=s;class i extends Error{constructor(d,v){super("Message expired"),this.address=d,this.hash=v}}t.MessageExpiredException=i;class r{constructor(){this.transactions=new Map}async waitTransaction(d,v){var w;let L=(w=this.transactions.get(v))===null||w===void 0?void 0:w.promise;if(L==null){let m,o;L=new Promise((u,p)=>{m=y=>u(y),o=()=>p()}),this.transactions.set(v,{promise:L,resolve:m,reject:o})}const M=await L;if(M==null)throw new i(d,v);return M}fillTransaction(d,v){const w=this.transactions.get(d);w!=null?w.resolve(v):this.transactions.set(d,{promise:Promise.resolve(v),resolve:()=>{},reject:()=>{}})}}t.DelayedTransactions=r;class a{constructor(d){this.tasks=[],this.sched=()=>{var v;this.count>0&&this.tasks.length>0&&(this.count--,(v=this.tasks.shift())===null||v===void 0||v())},this.count=d}acquire(){return new Promise((d,v)=>{this.tasks.push(()=>{let w=!1;d(()=>{w||(w=!0,this.count++,this.sched())})}),h(this.sched)})}releaseAll(){for(var d;this.tasks.length>0;)(d=this.tasks.shift())===null||d===void 0||d()}}t.Semaphore=a;function c(l){const d=document.createTextNode("");let v,w,L=0,M=0;return new l(function(){let m;if(v)w&&(v=w.slice(M).concat(v));else{if(!w)return;v=w}if(w=v,v=null,M=0,typeof w=="function"){m=w,w=null,m();return}for(d.data=L=++L%2;M<w.length;)m=w[M],M++,M===w.length&&(w=null),m()}).observe(d,{characterData:!0}),function(m){if(v){typeof v=="function"?v=[v,m]:v.push(m);return}v=m,d.data=L=++L%2}}const h=function(){if(typeof queueMicrotask=="function")return queueMicrotask;if(typeof document=="object"&&document){if(typeof MutationObserver=="function")return c(MutationObserver);if(typeof window.WebKitMutationObserver=="function")return c(window.WebKitMutationObserver)}if(typeof setImmediate=="function")return setImmediate;if(typeof setTimeout=="function"||typeof setTimeout=="object")return function(l){setTimeout(l,0)};throw new Error("No `nextTick` implementation found")}();t.LT_COLLATOR=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function f(l,d,v){if(v.batchType==="old")return l.push(...d),l;if(l.length===0)return l.push(...d),l;let w=0;for(;w<l.length&&t.LT_COLLATOR.compare(l[w].id.lt,v.maxLt)>=0;)++w;return l.splice(w,0,...d),l}t.mergeTransactions=f;const b=4294967295;let _=Math.floor(Math.random()*b);function g(){return _=(_+1)%b,_}t.getUniqueId=g})(Y);Object.defineProperty(k,"__esModule",{value:!0});k.parsePartialTokensObject=k.parseTokensObject=k.serializeTokensObject=k.parseAccountInteraction=k.parsePermissions=k.parseMessage=k.serializeMessage=k.parseTransaction=k.serializeTransaction=void 0;const G=Y;function dn(t){return{id:{hash:t.id.hash,lt:t.id.lt},prevTransactionId:t.prevTransactionId!=null?{hash:t.prevTransactionId.hash,lt:t.prevTransactionId.lt}:void 0,createdAt:t.createdAt,aborted:t.aborted,exitCode:t.exitCode,resultCode:t.resultCode,origStatus:t.origStatus,endStatus:t.endStatus,totalFees:t.totalFees,inMessage:ye(t.inMessage),outMessages:t.outMessages.map(ye)}}k.serializeTransaction=dn;function ln(t){return{...t,inMessage:_e(t.inMessage),outMessages:t.outMessages.map(_e)}}k.parseTransaction=ln;function ye(t){return{hash:t.hash,src:t.src?t.src.toString():void 0,dst:t.dst?t.dst.toString():void 0,value:t.value,bounce:t.bounce,bounced:t.bounced,body:t.body,bodyHash:t.bodyHash}}k.serializeMessage=ye;function _e(t){return{...t,src:t.src?new G.Address(t.src):void 0,dst:t.dst?new G.Address(t.dst):void 0}}k.parseMessage=_e;function hn(t){return{...t,accountInteraction:t.accountInteraction?Ke(t.accountInteraction):void 0}}k.parsePermissions=hn;function Ke(t){return{...t,address:new G.Address(t.address)}}k.parseAccountInteraction=Ke;function pn(t){return ge(t)}k.serializeTokensObject=pn;function ge(t){if(typeof t=="object"&&(0,G.isAddressObject)(t))return t.toString();if(Array.isArray(t)){const e=[];for(const n of t)e.push(ge(n));return e}else if(t!=null&&typeof t=="object"){const e={};for(const[n,s]of Object.entries(t))e[n]=ge(s);return e}else return t}function fn(t,e){const n={};for(const s of t)n[s.name]=K(s,e[s.name]);return n}k.parseTokensObject=fn;function vn(t,e){const n={};for(const s of t)Object.prototype.hasOwnProperty.call(e,s.name)&&(n[s.name]=K(s,!e[s.name]));return n}k.parsePartialTokensObject=vn;function K(t,e){if(t.type.startsWith("map")){const n=t.type.indexOf(","),s=t.type.slice(4,n),i=t.type.slice(n+1,-1),r=[];for(const[a,c]of e)r.push([K({name:"",type:s},a),K({name:"",type:i,components:t.components},c)]);return r}else{const n=t.type.endsWith("[]"),s=!n&&t.type.startsWith("optional"),i=n?t.type.slice(0,-2):s?t.type.slice(9,-1):t.type;if(n){const r={name:t.name,type:i,components:t.components},a=[];for(const c of e)a.push(K(r,c));return a}else if(s){if(e==null)return null;{const r={name:t.name,type:i,components:t.components};return K(r,e)}}else if(i==="tuple"){const r={};if(t.components!=null)for(const a of t.components)r[a.name]=K(a,e[a.name]);return r}else return i==="address"?new G.Address(e):e}}var Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.Subscriber=void 0;const Q=Y,bn=k;class mn{constructor(e){this.provider=e,this.subscriptions=new Map,this.scanners=new Map,this.unsubscribe=async()=>this._unsubscribe()}transactions(e){return this._addSubscription("transactionsFound",e,!1)}trace(e){const n=(0,Q.getUniqueId)();return new D((s,i)=>{const r=new yn(this.provider,{origin:e,onData:s,onEnd:a=>{this.scanners.delete(n),i(a)}});return this.scanners.set(n,r),r.start(),Promise.resolve()},async()=>{const s=this.scanners.get(n);s!=null&&(this.scanners.delete(n),await s.stop())},de,!0)}oldTransactions(e,n){const s=(0,Q.getUniqueId)();return new D((i,r)=>{const a=new wn(this.provider,{address:e,onData:i,onEnd:c=>{this.scanners.delete(s),r(c)},...n});return this.scanners.set(s,a),a.start(),Promise.resolve()},async()=>{const i=this.scanners.get(s);i!=null&&(this.scanners.delete(s),await i.stop())},de,!0)}states(e){return this._addSubscription("contractStateChanged",e,!1)}async _unsubscribe(){const e=[];for(const n of this.subscriptions.values())for(const[s,i]of Object.entries(n))delete n[s],i!=null&&e.push(i.subscription.then(r=>r.unsubscribe()).catch(()=>{}));this.subscriptions.clear();for(const n of this.scanners.values())e.push(n.stop());this.scanners.clear(),await Promise.all(e)}_addSubscription(e,n,s){const i=n.toString(),r=c=>{const h=this.subscriptions.get(i);if(h==null)return;const f=h[e];if(f!=null){const b=f.handlers.get(c);if(b!=null){f.handlers.delete(c);const{queue:_,onEnd:g,state:l}=b;l.finished||(l.finished=!0,_.clear(),_.enqueue(async()=>g(l.eof)))}if(f.handlers.size===0){const _=f.subscription;delete h[e],_.then(g=>g.unsubscribe()).catch(console.debug)}}h.contractStateChanged==null&&h.transactionsFound==null&&this.subscriptions.delete(i)},a=(0,Q.getUniqueId)();return new D((c,h)=>{const f=this.subscriptions.get(i);let b=f==null?void 0:f[e];const _={eof:!1,finished:!1},g={onData:c,onEnd:h,queue:new Oe,state:_};if(b!=null)return b.handlers.set(a,g),Promise.resolve();const l=new Map;l.set(a,g);const d=this.provider.subscribe(e,{address:n}).then(v=>(v.on("data",w=>{for(const{onData:L,queue:M,state:m}of l.values())m.eof||m.finished||M.enqueue(async()=>{await L(w)||(m.eof=!0,r(a))})}),v.on("unsubscribed",()=>{for(const w of l.keys())r(w)}),v)).catch(v=>{console.error(v);for(const w of l.keys())r(w);throw v});return b={subscription:d,handlers:l},f==null?this.subscriptions.set(i,{[e]:b}):f[e]=b,d.then(()=>{})},()=>r(a),de,s)}}Z.Subscriber=mn;async function de(t,e){return e(t)}class D{constructor(e,n,s,i){this.makeProducer=e,this.stopProducer=n,this.extractor=s,this.isFinite=i,this.fold=this.onlyFinite((r,a,c)=>{let h=r;return new Promise((f,b)=>{const _=this.makeProducer(g=>this.extractor(g,async l=>(h=await a(h,l),!0)),g=>{g?f(h):b(new Error("Subscription closed"))});c!=null&&(c.subscribed=_)})}),this.finished=this.onlyFinite(r=>new Promise((a,c)=>{const h=this.makeProducer(f=>this.extractor(f,b=>!0),f=>{f?a(void 0):c(new Error("Subscription closed"))});r!=null&&(r.subscribed=h)}))}async delayed(e){const{subscribed:n,result:s}=e({first:()=>{const i={},r=this.first(i);return{subscribed:i.subscribed,result:r}},on:i=>{const r={};return this.on(i,r),{subscribed:r.subscribed,result:void 0}},fold:this.fold!=null?(i,r)=>{const a={},c=this.fold(i,r,a);return{subscribed:a.subscribed,result:c}}:void 0,finished:this.finished!=null?()=>{const i={},r=this.finished(i);return{subscribed:i.subscribed,result:r}}:void 0});return await n,()=>s}first(e){const n={found:!1};return new Promise((s,i)=>{const r=this.makeProducer(a=>this.extractor(a,c=>(Object.assign(n,{found:!0,result:c}),!1)),a=>{a?this.isFinite?s(n.found?n.result:void 0):n.found?s(n.result):i(new Error("Unexpected end of stream")):i(new Error("Subscription closed"))});e!=null&&(e.subscribed=r)})}on(e,n){const s=this.makeProducer(i=>this.extractor(i,async r=>(await e(r),!0)),i=>{});n!=null&&(n.subscribed=s)}merge(e){return new D((n,s)=>{const i={stopped:!1,counter:0},r=a=>{i.stopped||(++i.counter==2||!a)&&(i.stopped=!0,s(a))};return Promise.all([this.makeProducer(n,r),e.makeProducer(n,r)]).then(()=>{})},()=>{this.stopProducer(),e.stopProducer()},this.extractor,this.isFinite&&e.isFinite)}enumerate(){const e={index:0};return new D(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async i=>s({index:e.index++,item:i})),this.isFinite)}tap(e){return new D(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async i=>(await e(i),s(i))),this.isFinite)}filter(e){return new D(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async i=>await e(i)?s(i):!0),this.isFinite)}filterMap(e){return new D(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async i=>{const r=await e(i);return r!==void 0?s(r):!0}),this.isFinite)}map(e){return new D(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async i=>{const r=await e(i);return s(r)}),this.isFinite)}flatMap(e){return new D(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async i=>{const r=await e(i);for(const a of r)if(!await s(a))return!1;return!0}),this.isFinite)}skip(e){const n={index:0};return new D(this.makeProducer,this.stopProducer,(s,i)=>this.extractor(s,r=>n.index>=e?i(r):(++n.index,!0)),this.isFinite)}skipWhile(e){const n={shouldSkip:!0};return new D(this.makeProducer,this.stopProducer,(s,i)=>this.extractor(s,async r=>!n.shouldSkip||!await e(r)?(n.shouldSkip=!1,i(r)):!0),this.isFinite)}take(e){const n={index:0};return new D(this.makeProducer,this.stopProducer,(s,i)=>this.extractor(s,r=>n.index<e?(++n.index,i(r)):!1),!0)}takeWhile(e){return new D(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async i=>await e(i)?s(i):!1),!0)}takeWhileMap(e){return new D(this.makeProducer,this.stopProducer,(n,s)=>this.extractor(n,async i=>{const r=await e(i);return r!==void 0?s(r):!1}),!0)}onlyFinite(e){if(this.isFinite)return e}}class wn{constructor(e,n){this.provider=e,this.params=n,this.queue=new Oe,this.isRunning=!1}start(){this.isRunning||this.promise!=null||(this.isRunning=!0,this.promise=(async()=>{const e=this.params,n={complete:!1};for(;this.isRunning&&!n.complete;)try{const{transactions:s,continuation:i}=await this.provider.getTransactions({address:this.params.address,continuation:this.continuation});if(n.complete=!n.complete&&s.length==null,!this.isRunning||n.complete)break;const r=s.filter(c=>(e.fromLt==null||Q.LT_COLLATOR.compare(c.id.lt,e.fromLt)>0)&&(e.fromUtime==null||c.createdAt>e.fromUtime));if(r.length==0){n.complete=!0;break}const a={maxLt:r[0].id.lt,minLt:r[r.length-1].id.lt,batchType:"old"};if(this.queue.enqueue(async()=>{await this.params.onData({address:this.params.address,transactions:r,info:a})||(n.complete=!0,this.isRunning=!1)}),i!=null)this.continuation=i;else{n.complete=!0;break}}catch(s){console.error(s)}this.queue.enqueue(async()=>this.params.onEnd(n.complete)),this.isRunning=!1,this.continuation=void 0})())}async stop(){this.isRunning=!1,this.queue.clear(),this.promise!=null?await this.promise:this.params.onEnd(!1)}}class yn{constructor(e,n){this.provider=e,this.params=n,this.queue=new Oe,this.isRunning=!1,this.semaphore=new Q.Semaphore(10)}start(){if(this.isRunning||this.promise!=null)return;const e=this.provider;this.isRunning=!0,this.promise=(async()=>{const n={complete:!1},s=r=>{const a={stopped:!1};return{promise:(async()=>{let f=500;for(;;){const b=await this.semaphore.acquire();if(a.stopped){b();return}const _=await e.rawApi.findTransaction({inMessageHash:r}).catch(()=>({transaction:void 0})).finally(()=>b());if(a.stopped)return;if(_.transaction!=null){const d=(0,bn.parseTransaction)(_.transaction);return d.account=d.inMessage.dst,d}let g;const l=new Promise((d,v)=>{g=()=>d(),a.reject=()=>v()});if(a.timeout=setTimeout(g,f),await l,a.stopped)return;a.reject=void 0,f=Math.min(f*2,3e3)}})(),reject:()=>{var f;a.stopped=!0,(f=a.reject)===null||f===void 0||f.call(a),a.timeout!=null&&clearTimeout(a.timeout)}}},i=[this.params.origin];try{e:for(;this.isRunning;){const r=i.shift();if(r==null){n.complete=!0;break}const a=r.outMessages.filter(c=>c.dst!=null).map(c=>{const h=c.hash;return s(h)});this.pendingTransactions=a;for(const{promise:c}of a){const h=await c;if(!this.isRunning||n.complete||h==null)break e;this.queue.enqueue(async()=>{await this.params.onData(h)||(n.complete=!0,this.isRunning=!1,this.rejectPendingTransactions())}),i.push(h)}this.pendingTransactions=void 0}}catch(r){console.error(r)}finally{this.queue.enqueue(async()=>this.params.onEnd(n.complete)),this.isRunning=!1,this.rejectPendingTransactions()}})()}async stop(){this.isRunning=!1,this.queue.clear(),this.rejectPendingTransactions(),this.promise!=null?await this.promise:this.params.onEnd(!1)}rejectPendingTransactions(){if(this.pendingTransactions!=null){for(const e of this.pendingTransactions)e.reject();this.pendingTransactions=void 0}this.semaphore.releaseAll()}}class Oe{constructor(){this.queue=[],this.workingOnPromise=!1}enqueue(e){this.queue.push(e),this._dequeue().catch(()=>{})}clear(){this.queue.length=0}async _dequeue(){if(this.workingOnPromise)return;const e=this.queue.shift();e&&(this.workingOnPromise=!0,e().then(()=>{this.workingOnPromise=!1,this._dequeue()}).catch(()=>{this.workingOnPromise=!1,this._dequeue()}))}}var N={};Object.defineProperty(N,"__esModule",{value:!0});N.TvmException=N.Contract=void 0;const U=Y,O=k;class _n{constructor(e,n,s){if(!Array.isArray(n.functions))throw new Error("Invalid abi. Functions array required");if(!Array.isArray(n.events))throw new Error("Invalid abi. Events array required");this._provider=e,this._abi=JSON.stringify(n),this.methodsAbi=n.functions.reduce((i,r)=>(r.inputs==null&&(r.inputs=[]),r.outputs==null&&(r.outputs=[]),i[r.name]=r,i),{}),this.eventsAbi=n.events.reduce((i,r)=>(r.inputs==null&&(r.inputs=[]),i[r.name]=r,i),{}),this.fieldsAbi=n.fields,this._address=s,this._methods=new Proxy({},{get:(i,r)=>{const a=this.methodsAbi[r];return(c={})=>new gn(this._provider,a,this._abi,this._address,r,c)}}),this._fields=new Proxy({},{get:(i,r)=>async(a={})=>{await this._provider.ensureInitialized();const{fields:c,state:h}=await this._provider.rawApi.getContractFields({address:this._address.toString(),abi:this._abi,cachedState:a==null?void 0:a.cachedState,allowPartial:(a==null?void 0:a.allowPartial)==null?!1:a.allowPartial});if(c==null)throw h==null?new Error("Account does not exist"):h.isDeployed?new Error("Invalid account data"):new Error("Account is not deployed");const f=(0,O.parseTokensObject)(this.fieldsAbi,c);if(f==null||!Object.prototype.hasOwnProperty.call(f,r))throw new Error("Unknown field");return f[r]}})}get methods(){return this._methods}get fields(){return this._fields}get address(){return this._address}get abi(){return this._abi}async getFullState(){return await this._provider.ensureInitialized(),await this._provider.rawApi.getFullContractState({address:this.address.toString()})}async getFields(e={}){await this._provider.ensureInitialized();const{fields:n,state:s}=await this._provider.rawApi.getContractFields({address:this.address.toString(),abi:this._abi,cachedState:e.cachedState,allowPartial:e.allowPartial==null?!1:e.allowPartial});return{fields:n!=null?(0,O.parseTokensObject)(this.fieldsAbi,n):void 0,state:s}}transactions(e){return e.transactions(this._address).flatMap(({transactions:n})=>n)}events(e){return e.transactions(this._address).flatMap(({transactions:n})=>n).flatMap(n=>this.decodeTransactionEvents({transaction:n}).then(s=>(s.forEach(i=>i.transaction=n),s)))}async waitForEvent(e={}){const{range:n,filter:s}=e,i=typeof s=="string"?({event:h})=>h===s:s;let r=e.subscriber;const a=r==null;r==null&&(r=new this._provider.Subscriber);const c=await((n==null?void 0:n.fromLt)!=null||(n==null?void 0:n.fromUtime)!=null?r.oldTransactions(this._address,n).merge(r.transactions(this._address)):r.transactions(this.address)).flatMap(h=>h.transactions).takeWhile(h=>n==null||(n.fromLt==null||U.LT_COLLATOR.compare(h.id.lt,n.fromLt)>0)&&(n.fromUtime==null||h.createdAt>n.fromUtime)&&(n.toLt==null||U.LT_COLLATOR.compare(h.id.lt,n.toLt)<0)&&(n.toUtime==null||h.createdAt<n.toUtime)).flatMap(h=>this.decodeTransactionEvents({transaction:h}).then(f=>(f.forEach(b=>b.transaction=h),f))).filterMap(async h=>{if(i==null||await i(h))return h}).first();return a&&await r.unsubscribe(),c}async getPastEvents(e){const{range:n,filter:s,limit:i}=e,r=typeof s=="string"?({event:h})=>h===s:s,a=[];let c=e==null?void 0:e.continuation;e:for(;;){const{transactions:h,continuation:f}=await this._provider.getTransactions({address:this._address,continuation:c});if(h.length===null)break;const b=h.filter(_=>((n==null?void 0:n.fromLt)==null||U.LT_COLLATOR.compare(_.id.lt,n.fromLt)>0)&&((n==null?void 0:n.fromUtime)==null||_.createdAt>n.fromUtime)&&((n==null?void 0:n.toLt)==null||U.LT_COLLATOR.compare(_.id.lt,n.toLt)<0)&&((n==null?void 0:n.toUtime)==null||_.createdAt<n.toUtime));if(b.length>0){const _=await Promise.all(b.map(async g=>({tx:g,events:await this.decodeTransactionEvents({transaction:g}).then(l=>(l.forEach(d=>d.transaction=g),l))})));for(let{tx:g,events:l}of _){r!=null&&(l=await Promise.all(l.map(async d=>await r(d)?d:void 0)).then(d=>d.filter(v=>v!=null))),c=g.id;for(const d of l){if(i!=null&&a.length>=i)break e;a.push(d)}if(i!=null&&a.length>=i)break e}}if(c=f,c==null)break}return{events:a,continuation:c}}async decodeTransaction(e){await this._provider.ensureInitialized();try{const n=await this._provider.rawApi.decodeTransaction({transaction:(0,O.serializeTransaction)(e.transaction),abi:this._abi,method:e.methods});if(n==null)return;const{method:s,input:i,output:r}=n,a=this.methodsAbi[s];return{method:s,input:a.inputs!=null?(0,O.parseTokensObject)(a.inputs,i):{},output:a.outputs!=null?(0,O.parseTokensObject)(a.outputs,r):{}}}catch{return}}async decodeTransactionEvents(e){await this._provider.ensureInitialized();try{const{events:n}=await this._provider.rawApi.decodeTransactionEvents({transaction:(0,O.serializeTransaction)(e.transaction),abi:this._abi}),s=[];for(const{event:i,data:r}of n){const a=this.eventsAbi[i];s.push({event:i,data:a.inputs!=null?(0,O.parseTokensObject)(a.inputs,r):{}})}return s}catch{return[]}}async decodeInputMessage(e){await this._provider.ensureInitialized();try{const n=await this._provider.rawApi.decodeInput({abi:this._abi,body:e.body,internal:e.internal,method:e.methods});if(n==null)return;const{method:s,input:i}=n,r=this.methodsAbi[s];return{method:s,input:r.inputs!=null?(0,O.parseTokensObject)(r.inputs,i):{}}}catch{return}}async decodeOutputMessage(e){await this._provider.ensureInitialized();try{const n=await this._provider.rawApi.decodeOutput({abi:this._abi,body:e.body,method:e.methods});if(n==null)return;const{method:s,output:i}=n,r=this.methodsAbi[s];return{method:s,output:r.outputs!=null?(0,O.parseTokensObject)(r.outputs,i):{}}}catch{return}}async decodeEvent(e){await this._provider.ensureInitialized();try{const n=await this._provider.rawApi.decodeEvent({abi:this.abi,body:e.body,event:e.events});if(n==null)return;const{event:s,data:i}=n,r=this.eventsAbi[s];return{event:s,data:r.inputs!=null?(0,O.parseTokensObject)(r.inputs,i):{}}}catch{return}}}N.Contract=_n;class Ne extends Error{constructor(e){super(`TvmException: ${e}`),this.code=e}}N.TvmException=Ne;class gn{constructor(e,n,s,i,r,a){this.provider=e,this.functionAbi=n,this.abi=s,this.address=i,this.method=r,this.params=(0,O.serializeTokensObject)(a)}async send(e){await this.provider.ensureInitialized();const{transaction:n}=await this.provider.rawApi.sendMessage({sender:e.from.toString(),recipient:this.address.toString(),amount:e.amount,bounce:e.bounce==null?!0:e.bounce,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:e.stateInit});return(0,O.parseTransaction)(n)}async sendDelayed(e){await this.provider.ensureInitialized();const n=new U.DelayedTransactions,s=await this.provider.subscribe("messageStatusUpdated");s.on("data",a=>{a.address.equals(e.from)&&n.fillTransaction(a.hash,a.transaction)});const{message:i}=await this.provider.rawApi.sendMessageDelayed({sender:e.from.toString(),recipient:this.address.toString(),amount:e.amount,bounce:e.bounce==null?!0:e.bounce,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:e.stateInit}).catch(a=>{throw s.unsubscribe().catch(console.error),a}),r=n.waitTransaction(this.address,i.hash).finally(()=>s.unsubscribe().catch(console.error));return{messageHash:i.hash,expireAt:i.expireAt,transaction:r}}async sendWithResult(e){await this.provider.ensureInitialized();let n=e.subscriber;const s=n==null;n==null&&(n=new this.provider.Subscriber);try{let i,r;const a=new Promise(l=>{r=d=>l(d)}),c=[];n.transactions(this.address).flatMap(l=>l.transactions).filter(l=>{var d;return((d=l.inMessage.src)===null||d===void 0?void 0:d.equals(e.from))||!1}).on(l=>{i==null?c.push(l):i.possibleMessages.findIndex(d=>d.hash==l.inMessage.hash)>=0&&(r==null||r(l))});const h=await this.send(e),f=h.outMessages.filter(l=>{var d;return((d=l.dst)===null||d===void 0?void 0:d.equals(this.address))||!1});i={transaction:h,possibleMessages:f};const b=c.find(l=>f.findIndex(d=>d.hash==l.inMessage.hash)>=0);b!=null&&(r==null||r(b));const _=await a;let g;try{const l=await this.provider.rawApi.decodeTransaction({transaction:(0,O.serializeTransaction)(_),abi:this.abi,method:this.method});l!=null&&(g=this.functionAbi.outputs!=null?(0,O.parseTokensObject)(this.functionAbi.outputs,l.output):{})}catch(l){console.error(l)}return{parentTransaction:i.transaction,childTransaction:_,output:g}}finally{s&&await n.unsubscribe()}}async estimateFees(e){await this.provider.ensureInitialized();const{fees:n}=await this.provider.rawApi.estimateFees({sender:e.from.toString(),recipient:this.address.toString(),amount:e.amount,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:e.stateInit});return n}async sendExternal(e){await this.provider.ensureInitialized();const n=e.withoutSignature===!0?this.provider.rawApi.sendUnsignedExternalMessage:this.provider.rawApi.sendExternalMessage,{transaction:s,output:i}=await n({publicKey:e.publicKey,recipient:this.address.toString(),stateInit:e.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},local:e.local,executorParams:e.executorParams?{disableSignatureCheck:e.executorParams.disableSignatureCheck,overrideBalance:e.executorParams.overrideBalance}:void 0});return{transaction:(0,O.parseTransaction)(s),output:i!=null?(0,O.parseTokensObject)(this.functionAbi.outputs,i):void 0}}async sendExternalDelayed(e){await this.provider.ensureInitialized();const n=new U.DelayedTransactions,s=await this.provider.subscribe("messageStatusUpdated");s.on("data",a=>{a.address.equals(this.address)&&n.fillTransaction(a.hash,a.transaction)});const{message:i}=await this.provider.rawApi.sendExternalMessageDelayed({publicKey:e.publicKey,recipient:this.address.toString(),stateInit:e.stateInit,payload:{abi:this.abi,method:this.method,params:this.params}}).catch(a=>{throw s.unsubscribe().catch(console.error),a}),r=n.waitTransaction(this.address,i.hash).finally(()=>s.unsubscribe().catch(console.error));return{messageHash:i.hash,expireAt:i.expireAt,transaction:r}}async call(e={}){await this.provider.ensureInitialized();const{output:n,code:s}=await this.provider.rawApi.runLocal({address:this.address.toString(),cachedState:e.cachedState,responsible:e.responsible,functionCall:{abi:this.abi,method:this.method,params:this.params}});if(n==null||s!=0)throw new Ne(s);return(0,O.parseTokensObject)(this.functionAbi.outputs,n)}async executeExternal(e){await this.provider.ensureInitialized();const{transaction:n,newState:s,output:i}=await this.provider.rawApi.executeLocal({address:this.address.toString(),cachedState:e.cachedState,stateInit:e.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},messageHeader:{type:"external",publicKey:e.publicKey,withoutSignature:e.withoutSignature},executorParams:e.executorParams!=null?{disableSignatureCheck:e.executorParams.disableSignatureCheck,overrideBalance:e.executorParams.overrideBalance}:void 0});return{transaction:(0,O.parseTransaction)(n),newState:s,output:i!==void 0?(0,O.parseTokensObject)(this.functionAbi.outputs,i):void 0}}async executeInternal(e){await this.provider.ensureInitialized();const{transaction:n,newState:s,output:i}=await this.provider.rawApi.executeLocal({address:this.address.toString(),cachedState:e.cachedState,stateInit:e.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},messageHeader:{type:"internal",sender:e.sender.toString(),amount:e.amount,bounce:e.bounce!=null?e.bounce:!1,bounced:e.bounced},executorParams:e.executorParams!=null?{disableSignatureCheck:e.executorParams.disableSignatureCheck,overrideBalance:e.executorParams.overrideBalance}:void 0});return{transaction:(0,O.parseTransaction)(n),newState:s,output:i!==void 0?(0,O.parseTokensObject)(this.functionAbi.outputs,i):void 0}}async encodeInternal(){await this.provider.ensureInitialized();const{boc:e}=await this.provider.rawApi.encodeInternalInput({abi:this.abi,method:this.method,params:this.params});return e}}var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});(function(t){var e=q&&q.__createBinding||(Object.create?function(m,o,u,p){p===void 0&&(p=u);var y=Object.getOwnPropertyDescriptor(o,u);(!y||("get"in y?!o.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(m,p,y)}:function(m,o,u,p){p===void 0&&(p=u),m[p]=o[u]}),n=q&&q.__setModuleDefault||(Object.create?function(m,o){Object.defineProperty(m,"default",{enumerable:!0,value:o})}:function(m,o){m.default=o}),s=q&&q.__importStar||function(m){if(m&&m.__esModule)return m;var o={};if(m!=null)for(var u in m)u!=="default"&&Object.prototype.hasOwnProperty.call(m,u)&&e(o,m,u);return n(o,m),o},i=q&&q.__exportStar||function(m,o){for(var u in m)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&e(o,m,u)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProviderNotInitializedException=t.ProviderNotFoundException=t.ProviderRpcClient=t.hasEverscaleProvider=t.LT_COLLATOR=t.isAddressObject=t.mergeTransactions=t.MessageExpiredException=t.AddressLiteral=t.Address=t.Subscriber=void 0;const r=k,a=Y,c=s(Z),h=s(N);i(Ve,t),i(k,t),i(N,t);var f=Z;Object.defineProperty(t,"Subscriber",{enumerable:!0,get:function(){return f.Subscriber}});var b=Y;Object.defineProperty(t,"Address",{enumerable:!0,get:function(){return b.Address}}),Object.defineProperty(t,"AddressLiteral",{enumerable:!0,get:function(){return b.AddressLiteral}}),Object.defineProperty(t,"MessageExpiredException",{enumerable:!0,get:function(){return b.MessageExpiredException}}),Object.defineProperty(t,"mergeTransactions",{enumerable:!0,get:function(){return b.mergeTransactions}}),Object.defineProperty(t,"isAddressObject",{enumerable:!0,get:function(){return b.isAddressObject}}),Object.defineProperty(t,"LT_COLLATOR",{enumerable:!0,get:function(){return b.LT_COLLATOR}});const _=typeof window<"u"&&typeof window.document<"u";let g;!_||document.readyState==="complete"?g=Promise.resolve():g=new Promise(m=>{window.addEventListener("load",()=>{m()})});const l=()=>_?window.__ever||window.ton:void 0;async function d(){return _?(await g,window.__hasEverscaleProvider===!0||window.hasTonProvider===!0):!1}t.hasEverscaleProvider=d;class v{constructor(o={}){this._subscriptions={connected:new Map,disconnected:new Map,transactionsFound:new Map,contractStateChanged:new Map,messageStatusUpdated:new Map,networkChanged:new Map,permissionsChanged:new Map,loggedOut:new Map},this._contractSubscriptions=new Map,this._properties=o;const u=this;class p extends h.Contract{constructor(P,E){super(u,P,E)}}this.Contract=p;class y extends c.Subscriber{constructor(){super(u)}}this.Subscriber=y,this._api=new Proxy({},{get:(T,P)=>E=>{if(this._provider!=null)return this._provider.request({method:P,params:E});throw new L}}),o.forceUseFallback===!0?this._initializationPromise=o.fallback!=null?o.fallback().then(T=>{this._provider=T}):Promise.resolve():(this._provider=l(),this._provider!=null?this._initializationPromise=Promise.resolve():this._initializationPromise=d().then(T=>new Promise(P=>{if(!T)return P();if(this._provider=l(),this._provider!=null)P();else{const E=window.__hasEverscaleProvider===!0?"ever#initialized":"ton#initialized";window.addEventListener(E,C=>{this._provider=l(),P()})}})).then(async()=>{this._provider==null&&o.fallback!=null&&(this._provider=await o.fallback())})),this._initializationPromise.then(()=>{this._provider!=null&&this._registerEventHandlers(this._provider)})}async hasProvider(){return this._properties.fallback!=null?!0:d()}async ensureInitialized(){if(await this._initializationPromise,this._provider==null)throw new w}get isInitialized(){return this._provider!=null}get raw(){if(this._provider!=null)return this._provider;throw new L}get rawApi(){return this._api}createContract(o,u){return new this.Contract(o,u)}createSubscriber(){return new this.Subscriber}async requestPermissions(o){await this.ensureInitialized();const u=await this._api.requestPermissions({permissions:o.permissions});return(0,r.parsePermissions)(u)}async changeAccount(){await this.ensureInitialized(),await this._api.changeAccount()}async disconnect(){await this.ensureInitialized(),await this._api.disconnect()}async subscribe(o,u){class p{constructor(E,C){this._subscribe=E,this._unsubscribe=C,this._listeners={data:[],subscribed:[],unsubscribed:[]},this._subscribed=!1,this.subscribe=async()=>{if(!this._subscribed){this._subscribed=!0,await this._subscribe(this);for(const x of this._listeners.subscribed)x()}},this.unsubscribe=async()=>{if(this._subscribed){this._subscribed=!1,await this._unsubscribe();for(const x of this._listeners.unsubscribed)x()}}}on(E,C){return this._listeners[E].push(C),this}notify(E){for(const C of this._listeners.data)C(E)}}const y=this._subscriptions[o],T=(0,a.getUniqueId)();switch(o){case"connected":case"disconnected":case"messageStatusUpdated":case"networkChanged":case"permissionsChanged":case"loggedOut":{const P=new p(async E=>{y.has(T)||y.set(T,C=>{E.notify(C)})},async()=>{y.delete(T)});return await P.subscribe(),P}case"transactionsFound":case"contractStateChanged":{if(u==null)throw new Error("Address must be specified for the subscription");await this.ensureInitialized();const P=u.address.toString(),E=new p(async C=>{if(y.has(T))return;y.set(T,X=>{X.address.toString()===P&&C.notify(X)});let x=this._contractSubscriptions.get(P);x==null&&(x=new Map,this._contractSubscriptions.set(P,x));const J={state:o==="contractStateChanged",transactions:o==="transactionsFound"};x.set(T,J);const{total:B,withoutExcluded:Ee}=M(x.values(),J);try{(B.transactions!==Ee.transactions||B.state!==Ee.state)&&await this.rawApi.subscribe({address:P,subscriptions:B})}catch(X){throw y.delete(T),x.delete(T),X}},async()=>{y.delete(T);const C=this._contractSubscriptions.get(P);if(C==null)return;const x=C.get(T),{total:J,withoutExcluded:B}=M(C.values(),x);C.delete(T),!B.transactions&&!B.state?await this.rawApi.unsubscribe({address:P}):(J.transactions!==B.transactions||J.state!==B.state)&&await this.rawApi.subscribe({address:P,subscriptions:B})});return await E.subscribe(),E}default:throw new Error(`Unknown event ${o}`)}}async getProviderState(){await this.ensureInitialized();const o=await this._api.getProviderState();return{...o,permissions:(0,r.parsePermissions)(o.permissions)}}async getBalance(o){const{state:u}=await this.getFullContractState({address:o});return u==null?"0":u==null?void 0:u.balance}async getFullContractState(o){return await this.ensureInitialized(),await this._api.getFullContractState({address:o.address.toString()})}async getAccountsByCodeHash(o){await this.ensureInitialized();const{accounts:u,continuation:p}=await this._api.getAccountsByCodeHash({...o});return{accounts:u.map(y=>new a.Address(y)),continuation:p}}async getTransactions(o){await this.ensureInitialized();const{transactions:u,continuation:p,info:y}=await this._api.getTransactions({...o,address:o.address.toString()});return{transactions:u.map(r.parseTransaction),continuation:p,info:y}}async getTransaction(o){await this.ensureInitialized();const{transaction:u}=await this._api.getTransaction({...o});return{transaction:u?(0,r.parseTransaction)(u):void 0}}async getExpectedAddress(o,u){const{address:p}=await this.getStateInit(o,u);return p}async getStateInit(o,u){await this.ensureInitialized();const{address:p,stateInit:y,hash:T}=await this._api.getExpectedAddress({abi:JSON.stringify(o),...u,initParams:(0,r.serializeTokensObject)(u.initParams)});return{address:new a.Address(p),stateInit:y,hash:T}}async unpackInitData(o,u){await this.ensureInitialized();const{publicKey:p,initParams:y}=await this._api.unpackInitData({abi:JSON.stringify(o),data:u});return{publicKey:p,initParams:(0,r.parsePartialTokensObject)(o.data,y)}}async getBocHash(o){return await this.ensureInitialized(),await this._api.getBocHash({boc:o}).then(({hash:u})=>u)}async packIntoCell(o){return await this.ensureInitialized(),await this._api.packIntoCell({abiVersion:o.abiVersion,structure:o.structure,data:(0,r.serializeTokensObject)(o.data)})}async unpackFromCell(o){await this.ensureInitialized();const{data:u}=await this._api.unpackFromCell({...o,structure:o.structure});return{data:(0,r.parseTokensObject)(o.structure,u)}}async extractPublicKey(o){await this.ensureInitialized();const{publicKey:u}=await this._api.extractPublicKey({boc:o});return u}async codeToTvc(o){await this.ensureInitialized();const{tvc:u}=await this._api.codeToTvc({code:o});return u}async mergeTvc(o){return await this.ensureInitialized(),await this._api.mergeTvc(o)}async splitTvc(o){return await this.ensureInitialized(),await this._api.splitTvc({tvc:o})}async setCodeSalt(o){let u;if(typeof o.salt=="string")await this.ensureInitialized(),u=o.salt;else{const{boc:p}=await this.packIntoCell(o.salt);u=p}return await this._api.setCodeSalt({code:o.code,salt:u})}async getCodeSalt(o){await this.ensureInitialized();const{salt:u}=await this.rawApi.getCodeSalt({code:o.code});return u}async addAsset(o){await this.ensureInitialized();let u;switch(o.type){case"tip3_token":{u={rootContract:o.params.rootContract.toString()};break}default:throw new Error("Unknown asset type")}return await this._api.addAsset({account:o.account.toString(),type:o.type,params:u})}async verifySignature(o){return await this.ensureInitialized(),await this._api.verifySignature(o)}async signData(o){return await this.ensureInitialized(),await this._api.signData(o)}async signDataRaw(o){return await this.ensureInitialized(),await this._api.signDataRaw(o)}async encryptData(o){await this.ensureInitialized();const{encryptedData:u}=await this._api.encryptData(o);return u}async decryptData(o){await this.ensureInitialized();const{data:u}=await this._api.decryptData({encryptedData:o});return u}async sendMessage(o){await this.ensureInitialized();const{transaction:u}=await this._api.sendMessage({sender:o.sender.toString(),recipient:o.recipient.toString(),amount:o.amount,bounce:o.bounce,payload:o.payload?{abi:o.payload.abi,method:o.payload.method,params:(0,r.serializeTokensObject)(o.payload.params)}:void 0,stateInit:o.stateInit});return{transaction:(0,r.parseTransaction)(u)}}async sendMessageDelayed(o){await this.ensureInitialized();const u=new a.DelayedTransactions,p=await this.subscribe("messageStatusUpdated");p.on("data",P=>{P.address.equals(o.sender)&&u.fillTransaction(P.hash,P.transaction)});const{message:y}=await this._api.sendMessageDelayed({sender:o.sender.toString(),recipient:o.recipient.toString(),amount:o.amount,bounce:o.bounce,payload:o.payload?{abi:o.payload.abi,method:o.payload.method,params:(0,r.serializeTokensObject)(o.payload.params)}:void 0,stateInit:o.stateInit}).catch(P=>{throw p.unsubscribe().catch(console.error),P}),T=u.waitTransaction(o.sender,y.hash).finally(()=>p.unsubscribe().catch(console.error));return{messageHash:y.hash,expireAt:y.expireAt,transaction:T}}_registerEventHandlers(o){const u={connected:p=>p,disconnected:p=>p,transactionsFound:p=>({address:new a.Address(p.address),transactions:p.transactions.map(r.parseTransaction),info:p.info}),contractStateChanged:p=>({address:new a.Address(p.address),state:p.state}),messageStatusUpdated:p=>({address:new a.Address(p.address),hash:p.hash,transaction:p.transaction!=null?(0,r.parseTransaction)(p.transaction):void 0}),networkChanged:p=>p,permissionsChanged:p=>({permissions:(0,r.parsePermissions)(p.permissions)}),loggedOut:p=>p};for(const[p,y]of Object.entries(u))o.addListener(p,T=>{const P=this._subscriptions[p],E=y(T);for(const C of P.values())C(E)})}}t.ProviderRpcClient=v;class w extends Error{constructor(){super("Everscale provider was not found")}}t.ProviderNotFoundException=w;class L extends Error{constructor(){super("Everscale provider was not initialized yet")}}t.ProviderNotInitializedException=L;function M(m,o){const u={state:!1,transactions:!1},p=Object.assign({},u);for(const y of m){if(p.transactions&&p.state)break;u.state||(u.state=y.state),u.transactions||(u.transactions=y.transactions),y!==o&&(p.state||(p.state=y.state),p.transactions||(p.transactions=y.transactions))}return{total:u,withoutExcluded:p}}})(ce);const Pn={class:"modal is-active"},Tn=A("div",{class:"modal-background"},null,-1),kn={class:"modal-content select-provider-modal"},An={class:"box"},On=A("p",{class:"modal-title"},"Connect a wallet",-1),Sn={class:"buttons"},En=["onClick"],In=R({__name:"ProviderSelector",props:{providers:{},onSelect:{type:Function}},setup(t){return(e,n)=>(S(),j("div",Pn,[Tn,A("div",kn,[A("div",An,[On,A("div",Sn,[(S(!0),j(je,null,De(e.providers,(s,i)=>(S(),j("button",{class:"button is-fullwidth provider-button",key:i,onClick:r=>e.onSelect(s.object)},W(s.title),9,En))),128))])])])]))}});let ee;typeof document<"u"&&typeof window<"u"?document.readyState==="complete"?ee=Promise.resolve():ee=new Promise(t=>{window.addEventListener("load",()=>{t()})}):ee=Promise.resolve();class Cn{async request(e){if(this.inner==null)throw new ce.ProviderNotInitializedException;return this.inner.request(e)}addListener(e,n){var s;return(s=this.inner)==null||s.addListener(e,n),this}removeListener(e,n){var s;return(s=this.inner)==null||s.removeListener(e,n),this}on(e,n){var s;return(s=this.inner)==null||s.on(e,n),this}once(e,n){var s;return(s=this.inner)==null||s.once(e,n),this}prependListener(e,n){var s;return(s=this.inner)==null||s.prependListener(e,n),this}prependOnceListener(e,n){var s;return(s=this.inner)==null||s.prependOnceListener(e,n),this}}class jn{constructor(e){this.params=e,this.provider=new Cn}asProviderFallback(){return()=>(this.providerPromise||(this.providerPromise=new Promise(e=>{this.providerResolve=e;const n=le();if(n){const s=this.getProviderByKey(n);s&&(this.provider.inner=s,this.providerResolve(s),this.providerResolve=void 0)}})),this.providerPromise)}initiateConnection(){if(this.providerResolve){const e=le();if(e){const s=this.getProviderByKey(e);if(s){this.provider.inner=s,this.providerResolve(s),this.providerResolve=void 0;return}}const n=async s=>{this.provider.inner=s,this.providerResolve(s),this.providerResolve=void 0;const i=this.getKeyByProvider(s);i&&this.setCookie("savedProviderKey",i,7)};this.selectProvider(n)||ee.then(()=>{if(!this.selectProvider(n))for(const{injected:s}of this.params.supportedWallets)typeof s.flag<"u"&&typeof s.event<"u"&&window[s.flag]===!0&&window.addEventListener(s.event,i=>{this.selectProvider(n)})})}}getProviderByKey(e){const n=this.params.supportedWallets.find(s=>s.title===e);if(n)return window[n.injected.object]}getKeyByProvider(e){const n=this.params.supportedWallets.find(s=>window[s.injected.object]===e);if(n)return n.title}selectProvider(e){const n=le();if(n){const a=this.getProviderByKey(n);if(a)return this.provider.inner=a,!0}const s=this.getProviders();if(s.length===0)return!1;if(s.length===1)return e(s[0].provider),!0;const i=$(null),r=Qe({setup(){return()=>$e(In,{providers:s.map(({provider:a,wallet:c})=>({title:c.title,object:a})),onSelect:a=>{i.value&&i.value.remove(),e(a)}})}});return re(()=>{if(typeof document>"u")return;document.getElementById("app")&&(i.value=document.createElement("div"),document.body.appendChild(i.value),r.mount(i.value))}),!0}getProviders(){const e=new Array;if(typeof window>"u")return e;for(const n of this.params.supportedWallets){const s=n.injected.object,i=window[s];i!=null&&e.push({provider:i,wallet:n})}return e}setCookie(e,n,s){if(typeof document>"u")return;let i="";if(s){let r=new Date;r.setTime(r.getTime()+s*24*60*60*1e3),i="; expires="+r.toUTCString()}document.cookie=e+"="+(n||"")+i+"; path=/"}deleteCookie(e){typeof document>"u"||(document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")}disconnectProvider(){this.provider.inner=void 0,this.providerPromise=void 0,this.deleteCookie("savedProviderKey")}}const se=new jn({supportedWallets:[{title:"EVER Wallet",injected:{object:"__ever",event:"ever#initialized"}},{title:"VENOM Wallet",injected:{object:"__venom"}}]}),le=(t="savedProviderKey")=>{if(typeof document>"u")return null;let e=t+"=",n=document.cookie.split(";");for(let s=0;s<n.length;s++){let i=n[s];for(;i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)==0)return i.substring(e.length,i.length)}return null},z=new ce.ProviderRpcClient({forceUseFallback:!0,fallback:se.asProviderFallback()}),Ue=async()=>{se.initiateConnection(),await new ce.ProviderRpcClient({forceUseFallback:!0,fallback:se.asProviderFallback()}).requestPermissions({permissions:["basic","accountInteraction"]})},Dn=async()=>{await z.changeAccount()},Ln=async()=>{await z.disconnect(),se.disconnectProvider(),location.reload()},He=$(!1),Se=Le(),te=$(),ie=$();z.hasProvider().then(async t=>{if(!t)return;He.value=!0,await z.ensureInitialized(),(await z.subscribe("permissionsChanged")).on("data",n=>{Se.value=n.permissions.accountInteraction}),(await z.subscribe("networkChanged")).on("data",n=>{ie.value=n.networkId.toString()});const e=await z.getProviderState();ie.value=e.networkId.toString(),e.permissions.accountInteraction!=null&&await Ue()});Me([Se,ie],async([t],e,n)=>{const s=t==null?void 0:t.address;if(s==null)return;te.value=void 0;const{state:i}=await z.getFullContractState({address:s});if((t==null?void 0:t.address)!=s)return;te.value=i==null?void 0:i.balance;const r=await z.subscribe("contractStateChanged",{address:s});n(()=>r.unsubscribe().catch(console.error)),r.on("data",a=>{a.address.equals(t==null?void 0:t.address)&&(te.value=a.state.balance)})},{immediate:!0});function Mn(){return{provider:z,hasProvider:He,selectedAccount:Se,selectedAccountBalance:te,selectedNetwork:ie,connectToWallet:Ue,changeAccount:Dn,disconnect:Ln}}const $n=R({name:"WalletControl",components:{DisconnectIcon:Fe},setup(){const{provider:t,connectToWallet:e,changeAccount:n,disconnect:s}=Mn(),i=$(!1);return ae(async()=>{(await t.subscribe("permissionsChanged")).on("data",b=>{i.value=!!b.permissions.accountInteraction});const f=await t.getProviderState();i.value=!!f.permissions.accountInteraction}),{connected:i,requestPermissions:async()=>{await e(),i.value=!0,location.reload()},disconnectWallet:async()=>{await s(),i.value=!1},changeAccountWallet:async()=>{await n()}}}});const xn={class:"walletControl"};function zn(t,e,n,s,i,r){const a=xe("DisconnectIcon");return S(),j("div",xn,[t.connected?(S(),j("button",{key:0,onClick:e[0]||(e[0]=(...c)=>t.changeAccountWallet&&t.changeAccountWallet(...c))},"Change Account")):Pe("",!0),t.connected?(S(),j("button",{key:1,class:"disconnectBtn",onClick:e[1]||(e[1]=(...c)=>t.disconnectWallet&&t.disconnectWallet(...c))},[ne(a,{size:16})])):(S(),j("button",{key:2,onClick:e[2]||(e[2]=(...c)=>t.requestPermissions&&t.requestPermissions(...c))},"Connect"))])}const Rn=V($n,[["render",zn],["__scopeId","data-v-abc38b4d"]]),Bn=["href","title"],qn=R({__name:"BDKOutlineItem",props:{headers:{},root:{type:Boolean}},emits:["update-marker"],setup(t,{emit:e}){async function n(s){if(typeof document>"u")return;const r="#"+s.target.href.split("#")[1],a=document.querySelector(decodeURIComponent(r));a==null||a.focus(),await re(),e("update-marker")}return(s,i)=>{const r=xe("OutlineItem");return S(),j("ul",{class:ze(s.root?"root":"nested")},[(S(!0),j(je,null,De(s.headers,(a,c)=>{var h;return S(),j("li",{key:c},[A("a",{class:"outline-link",href:a.link,title:a.title,onClick:n},W(a.title),9,Bn),(h=a.children)!=null&&h.length?(S(),he(r,{key:0,headers:a.children},null,8,["headers"])):Pe("",!0)])}),128))],2)}}});const We=V(qn,[["__scopeId","data-v-185e9a32"]]),Fn=t=>(Ge("data-v-740e66a8"),t=t(),Ze(),t),Kn={class:"content"},Nn={class:"outline-title"},Vn={"aria-labelledby":"doc-outline-aria-label"},Un=Fn(()=>A("span",{id:"doc-outline-aria-label",class:"visually-hidden"}," Table of Contents for current page ",-1)),Hn=R({__name:"BDKOutline",props:{content:{}},setup(t){const e=t,{serializeHeader:n,resolveHeaders:s,resolveTitle:i,useActiveAnchor:r,MenuItem:a}=require("./outline"),{frontmatter:c,theme:h}=Te(),f=Le([]),b=$(),_=$();r(b,_);const g=l=>{if(typeof document>"u")return[];const d=Array.from(document.querySelectorAll("h2,h3,h4,h5,h6")).filter(v=>v.id&&v.hasChildNodes()).map(v=>{const w=Number(v.tagName[1]);return{title:n(v),link:"#"+v.id,level:w}});return s(d,l)};return Me(()=>e.content,()=>{typeof window<"u"&&re(()=>{const l=document.createElement("div");l.innerHTML=e.content??"";const d=c.value.outline??2;f.value=g(d)})},{immediate:!0}),(l,d)=>(S(),j("div",{ref_key:"container",ref:b,class:ze(["asideOutline",{"has-outline":f.value.length>0}])},[A("div",Kn,[A("div",{ref_key:"marker",ref:_,class:"outline-marker"},null,512),A("div",Nn,W(pe(i)(pe(h))),1),A("nav",Vn,[Un,ne(We,{headers:f.value,root:!0},null,8,["headers"])])])],2))}});const Ye=V(Hn,[["__scopeId","data-v-740e66a8"]]),Wn=R({__name:"BDKLayout",setup(t){const{Layout:e}=be,n=Xe(),{frontmatter:s}=Te(),i=$(""),r=s.value.projectName??"";let a=Ie(()=>(n.path.split("/").pop()??"").replace(".html","")),c=$();const h=Ie(()=>s.value.apiReference??!1);return ae(async()=>{var f;h.value&&(c.value=await we(r,a.value),i.value=(f=c.value)==null?void 0:f.content)}),et(async()=>{var f;h.value&&(c.value=await we(r,a.value),i.value=(f=c.value)==null?void 0:f.content)}),(f,b)=>(S(),he(pe(e),null,tt({"nav-bar-content-after":ue(()=>[(S(),he(nt,null,{default:ue(()=>[ne(Rn)]),_:1}))]),_:2},[h.value?{name:"aside-outline-before",fn:ue(()=>[ne(Ye,{content:i.value},null,8,["content"])]),key:"0"}:void 0]),1024))}}),Yn=R({name:"BDKPage",props:{projectName:{type:String,default:""},pageName:{type:String,default:""},nodeEnv:{type:String,default:"local"}},setup(t){const e=$({content:""});return ae(async()=>{const n=await we(t.projectName,t.pageName,t.nodeEnv);if(n&&(e.value=n),await re(),typeof window<"u"&&typeof document<"u"){const s=window.location.hash;if(s){const i=document.getElementById(s.substring(1));i&&i.scrollIntoView({behavior:"smooth"})}}}),{apiReference:e}}});const Jn={key:0},Qn={key:1,class:"page-container"},Gn=["innerHTML"];function Zn(t,e,n,s,i,r){return t.apiReference.content===""||t.apiReference.content===void 0?(S(),j("div",Jn,"Loading...")):(S(),j("div",Qn,[A("div",{class:"page-content",innerHTML:t.apiReference.content},null,8,Gn)]))}const Xn=V(Yn,[["render",Zn],["__scopeId","data-v-28db0a8b"]]),es=R({name:"AccordionElement",props:{buttonText:{type:String,default:"Show transaction"},transactionData:{type:String,default:""}},setup(){const t=$(!1);function e(){t.value=!t.value}return{isOpen:t,toggleAccordion:e}}});const ts={class:"demo accordion"},ns={class:""};function ss(t,e,n,s,i,r){return S(),j("div",ts,[A("button",{class:"",onClick:e[0]||(e[0]=(...a)=>t.toggleAccordion&&t.toggleAccordion(...a))},W(t.buttonText),1),fe(A("div",ns,[A("pre",null,W(t.transactionData),1)],512),[[st,t.isOpen]])])}const is=V(es,[["render",ss],["__scopeId","data-v-fe994671"]]),rs=R({setup(){const t=$({name:"",age:null}),e=$("");function n(){e.value=JSON.stringify(t.value,null,2)}return{user:t,packedData:e,packData:n}}}),as={class:"demo"},os=A("label",{for:"name"},"Name:",-1),cs=A("label",{for:"age"},"Age:",-1),us={key:0};function ds(t,e,n,s,i,r){return S(),j("div",as,[A("div",null,[os,fe(A("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>t.user.name=a),type:"text"},null,512),[[Ce,t.user.name]])]),A("div",null,[cs,fe(A("input",{id:"age","onUpdate:modelValue":e[1]||(e[1]=a=>t.user.age=a),type:"number"},null,512),[[Ce,t.user.age]])]),A("button",{onClick:e[2]||(e[2]=(...a)=>t.packData&&t.packData(...a))},"Pack Data"),t.packedData?(S(),j("pre",us,W(t.packedData),1)):Pe("",!0)])}const ls=V(rs,[["render",ds]]),hs={...be,Layout:Wn,enhanceApp({app:t}){be.enhanceApp({app:t}),t.use(yt,{position:"top-right",timeout:5e3,closeOnClick:!1,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.7,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1}),t.config.errorHandler=function(e,n,s){_t(e.message,0)},t.component("BDKSimpleToast",gt),t.component("BDKPage",Xn),t.component("BDKOutline",Ye),t.component("BDKOutlineItem",We),t.component("BDKDisconnectIcon",Fe),t.component("BDKAccordion",is),t.component("PackDataSample",ls)}};function Je(t){if(t.extends){const e=Je(t.extends);return{...e,...t,async enhanceApp(n){e.enhanceApp&&await e.enhanceApp(n),t.enhanceApp&&await t.enhanceApp(n)}}}return t}const H=Je(hs),ps=R({name:"VitePressApp",setup(){const{site:t}=Te();return ae(()=>{vt(()=>{document.documentElement.lang=t.value.lang,document.documentElement.dir=t.value.dir})}),bt(),mt(),wt(),H.setup&&H.setup(),()=>$e(H.Layout)}});async function fs(){const t=bs(),e=vs();e.provide(rt,t);const n=at(t.route);return e.provide(ot,n),e.component("Content",ct),e.component("ClientOnly",ut),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get(){return n.frontmatter.value}},$params:{get(){return n.page.value.params}}}),H.enhanceApp&&await H.enhanceApp({app:e,router:t,siteData:dt}),{app:e,router:t,data:n}}function vs(){return lt(ps)}function bs(){let t=ve,e;return ht(n=>{let s=pt(n);return s?(t&&(e=s),(t||e===s)&&(s=s.replace(/\.js$/,".lean.js")),ve&&(t=!1),ft(()=>import(s),[])):null},H.NotFound)}ve&&fs().then(({app:t,router:e,data:n})=>{e.go().then(()=>{it(e.route,n.site),t.mount("#app")})});export{fs as createApp};
