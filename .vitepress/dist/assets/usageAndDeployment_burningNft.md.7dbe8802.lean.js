import{t as p,d}from"./chunks/index.3140ef9b.js";import{I as A}from"./chunks/BKDImgContainer.cbc55db5.js";import{u as f,f as h,l as E}from"./chunks/useProviders.c3f760b5.js";import{i as b}from"./chunks/isValideverAddress.f5c5d07d.js";import{z as g}from"./chunks/zeroAddress.201f434b.js";import{d as m,_ as C,J as F,c as _,k as s,n as e,N as B,a as o,V as u,o as v}from"./chunks/framework.af8f98c2.js";async function N(n){var l;try{const[a,r]=await f();if(!b(a,n))return p("Please enter a valid nft address !",0),"Failed";const D=h.Nft,i=new a.Contract(D,new d.Address(n)),y=await i.methods.getInfo({answerId:0}).call(),t=await i.methods.burn({sendGasTo:r,callbackTo:g,callbackPayload:""}).send({from:r,amount:String(2*10**9),bounce:!0});return t.aborted?`Burning Nft failed ${t.exitCode,t.resultCode}`:((l=(await a.getFullContractState({address:new d.Address(n)})).state)==null?void 0:l.isDeployed)?(p("Burning Nft failed",0),`Burning Nft failed ! ${t.exitCode,t.resultCode}`):(p(`Nft number ${y.id} burnt successfully`,1),`tx hash ${t.id.hash}`)}catch(a){return p(a.message,0),a.message}}const w=m({name:"deployToken",components:{ImgContainer:A,loading:E},data(){return{LLdis:"cbShow",EIPdis:"cbHide",llAction:"llAction cbShow",eipAction:"eipAction cbHide",collMeta:"cbHide",nftMeta:"cbHide",loadingText:" ",loadingText2:" "}},setup(){async function n(){if(this.loadingText="",this.$refs.actionNftAddress.value==""){p("Nft address field is required !",0),this.loadingText="Failed";return}let a=await N(this.$refs.actionNftAddress.value);a=a||"Failed",this.loadingText=a}async function l(a){a.target.innerHTML.includes("everscale-inpage-provider")?(this.LLdis="cbHide",this.EIPdis="cbShow",this.llAction="llAction cbHide",this.eipAction="eipAction cbShow"):a.target.innerHTML.includes("locklift")&&(this.EIPdis="cbHide",this.LLdis="cbShow",this.llAction="llAction cbShow",this.eipAction="eipAction cbHide")}return{_burnNft:n,codeBlockSwitchHandler:l}}}),os=JSON.parse('{"title":"Burning Nfts","description":"","frontmatter":{},"headers":[],"relativePath":"usageAndDeployment/burningNft.md","filePath":"src/pages/usageAndDeployment/burningNft.md"}');const T=s("h1",{id:"burning-nfts",tabindex:"-1"},[o("Burning Nfts "),s("a",{class:"header-anchor",href:"#burning-nfts","aria-label":'Permalink to "Burning Nfts"'},"​")],-1),k={class:"deployToken"},S=s("p",null,[o("In this section, we will learn how to use the "),s("code",null,"Index"),o(" contract to perform the burning operation on non-fungible tokens (NFTs). Burning an NFT involves draining all of the gas tokens in the NFT contract, which renders it unable to pay for storage fees on TVM-based blockchains.")],-1),P=s("p",null,"After the NFT is destroyed, the total supply amount in the collection contract is updated. This is achieved through a callback function that calls the relevant function on the collection contract, reducing the total supply by one.",-1),I=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"TIP"),s("p",null,"Please note that the destruction of the index contracts is not directly handled by the NFT or collection contract, nor by the user. The index contracts are frozen when their balance becomes negative due to storage fees and are eventually deleted after a certain period of time.")],-1),x=s("h2",{id:"step-1-write-burning-script",tabindex:"-1"},[o("Step 1: Write burning Script "),s("a",{class:"header-anchor",href:"#step-1-write-burning-script","aria-label":'Permalink to "Step 1: Write burning Script"'},"​")],-1),H=s("p",null,"The code sample below uses the locklift tool and the previously written script aon transferring NFTs to burn the nfts.",-1),q=s("p",null,[o("Add the following lines of code to the "),s("a",{href:"./transferringNft.html#step-1-write-transfer-script"},"previously written script"),o(" in the transferring NFTs section .")],-1),L=s("div",{class:"info custom-block"},[s("p",{class:"custom-block-title"},"INFO"),s("p",null,[o("Before we start to write our scripts we need to make sure that there is a file named "),s("code",null,"04-burn-nft.ts"),o(" in the "),s("code",null,"script"),o(" folder in the project root.")])],-1),$=[H,q,L],M=s("p",null,[o("Utilize the code sample below to burn the NFTs using the "),s("code",null,"everscale-inpage-provider"),o(" tool.")],-1),z=s("p",null,[o("add the following lines of code to the "),s("a",{href:"./transferringNft.html#step-1-write-transfer-script"},"previously written script"),o(" in the transferring NFTs section .")],-1),V=[M,z],O=u(`<div class="vp-code-group"><div class="tabs"><input type="radio" name="group-P3TnD" id="tab-H-pSTDy" checked="checked"><label for="tab-H-pSTDy">locklift</label><input type="radio" name="group-P3TnD" id="tab-Za-8k3b"><label for="tab-Za-8k3b">everscale-inpage-provider</label></div><div class="blocks"><div class="language-typescript active"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Adding an existing SafeMultiSig Account using its address and sending the burn transaction</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> bobAccount</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Account</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#BABED8;"> locklift</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">factory</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">accounts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addExistingAccount</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> WalletTypes</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">MsigAccount</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> BobAccount</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">address</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// if deploying new account &gt;&gt; new Address(&quot;YOUR_ACCOUNT_ADDRESS&quot;)</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">mSigType</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">SafeMultisig</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">publicKey</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> signerBob</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">publicKey</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#BABED8;"> nftContract</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">methods</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">burn</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">sendGasTo</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> bobAccount</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">address</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">callbackPayload</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">callbackTo</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> zeroAddress</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">from</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> bobAccount</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">address</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">amount</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> locklift</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toNano</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">bounce</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// fetching the account again and see if we get the &quot;account not found&quot; error</span></span>
<span class="line"><span style="color:#BABED8;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">burnt nft info: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#BABED8;"> nftContract</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">methods</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getInfo</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">answerId</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#BABED8;">())</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// Account not found</span></span></code></pre></div><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> burnRes</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Transaction</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#BABED8;"> nftContract</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">methods</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">burn</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">sendGasTo</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> providerAddress</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">callbackTo</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> zeroAddress</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">callbackPayload</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">from</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> providerAddress</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">amount</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">String</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">10</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">**</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">9</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">bounce</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div></div></div>`,1),R=[O],U={class:"action"},G=s("h2",{id:"step-2-burn-an-nft",tabindex:"-1"},[o("Step 2: Burn an NFT "),s("a",{class:"header-anchor",href:"#step-2-burn-an-nft","aria-label":'Permalink to "Step 2: Burn an NFT"'},"​")],-1),W=u('<p>Use this command to find the nfts using indexing:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npx</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">locklift</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">run</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">./scripts/05-burn-nft.ts</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-n</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">local</span></span></code></pre></div>',2),J=s("p",null,"Congratulations, you have successfully burnt an TIP4 Nft 🎉",-1),K=s("p",{style:{"margin-bottom":"0"}},"Nft Address",-1),Z={ref:"actionNftAddress",type:"text",class:"action Ain"};function j(n,l,a,r,D,i){const y=F("ImgContainer"),t=F("loading");return v(),_("div",null,[T,s("div",k,[S,P,I,x,s("span",{class:e(n.LLdis)},$,2),s("span",{class:e(n.EIPdis)},V,2),s("div",{onClick:l[0]||(l[0]=(...c)=>n.codeBlockSwitchHandler&&n.codeBlockSwitchHandler(...c))},R),s("div",U,[G,s("div",{class:e(n.llAction)},[W,B(y,{src:"/burningNft.png",width:"100%",altText:"deployTip3Output"}),J],2),s("div",{class:e(n.eipAction)},[K,s("input",Z,null,512),s("p",null,[s("button",{onClick:l[1]||(l[1]=(...c)=>n._burnNft&&n._burnNft(...c)),class:"deployTokenBut"}," Burn Nft ")]),s("p",{id:"output-p",class:e(n.EIPdis)},[B(t,{text:n.loadingText},null,8,["text"])],2)],2)])])])}const ls=C(w,[["render",j]]);export{os as __pageData,ls as default};
