import{t as o,d as h}from"./chunks/useProvider.2e5f59e5.js";import{I as w}from"./chunks/BKDImgContainer.a9f00260.js";import{u as _,i as C,l as N}from"./chunks/useProviders.6ecce3c8.js";import{d as I,_ as k,J as g,c as T,k as s,n as c,N as A,a as i,V as u,o as P}from"./chunks/framework.6ec58a3b.js";const x={ABIversion:2,version:"2.2",header:["pubkey","time","expire"],functions:[{name:"constructor",inputs:[],outputs:[]},{name:"sendTransaction",inputs:[{name:"dest",type:"address"},{name:"value",type:"uint128"},{name:"bounce",type:"bool"},{name:"flags",type:"uint8"},{name:"payload",type:"cell"}],outputs:[]},{name:"transferOwnership",inputs:[{name:"newOwner",type:"uint256"}],outputs:[]},{name:"owner",inputs:[],outputs:[{name:"owner",type:"uint256"}]},{name:"_randomNonce",inputs:[],outputs:[{name:"_randomNonce",type:"uint256"}]}],data:[{key:1,name:"_randomNonce",type:"uint256"}],events:[{name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"uint256"},{name:"newOwner",type:"uint256"}],outputs:[]}],fields:[{name:"_pubkey",type:"uint256"},{name:"_timestamp",type:"uint64"},{name:"_constructorFlag",type:"bool"},{name:"owner",type:"uint256"},{name:"_randomNonce",type:"uint256"}]},S={ABIversion:2,version:"2.2",header:["pubkey","time","expire"],functions:[{name:"constructor",inputs:[{name:"codeNft",type:"cell"},{name:"ownerPubkey",type:"uint256"},{name:"json",type:"string"}],outputs:[]},{name:"mintNft",inputs:[{name:"json",type:"string"},{components:[{name:"numerator",type:"uint128"},{name:"denominator",type:"uint128"},{name:"receiver",type:"address"}],name:"royalty",type:"tuple"}],outputs:[]},{name:"setRemainOnNft",inputs:[{name:"remainOnNft",type:"uint128"}],outputs:[]},{name:"owner",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"uint256"}]},{name:"transferOwnership",inputs:[{name:"newOwner",type:"uint256"}],outputs:[]},{name:"getJson",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"json",type:"string"}]},{name:"totalSupply",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"count",type:"uint128"}]},{name:"nftCode",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"code",type:"cell"}]},{name:"nftCodeHash",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"codeHash",type:"uint256"}]},{name:"nftAddress",inputs:[{name:"answerId",type:"uint32"},{name:"id",type:"uint256"}],outputs:[{name:"nft",type:"address"}]},{name:"supportsInterface",inputs:[{name:"answerId",type:"uint32"},{name:"interfaceID",type:"uint32"}],outputs:[{name:"value0",type:"bool"}]}],data:[{key:1,name:"_randomNonce",type:"uint32"}],events:[{name:"OwnershipTransferred",inputs:[{name:"oldOwner",type:"uint256"},{name:"newOwner",type:"uint256"}],outputs:[]},{name:"NftCreated",inputs:[{name:"id",type:"uint256"},{name:"nft",type:"address"},{name:"owner",type:"address"},{name:"manager",type:"address"},{name:"creator",type:"address"}],outputs:[]},{name:"NftBurned",inputs:[{name:"id",type:"uint256"},{name:"nft",type:"address"},{name:"owner",type:"address"},{name:"manager",type:"address"}],outputs:[]}],fields:[{name:"_pubkey",type:"uint256"},{name:"_timestamp",type:"uint64"},{name:"_constructorFlag",type:"bool"},{name:"_supportedInterfaces",type:"optional(cell)"},{name:"_codeNft",type:"cell"},{name:"_totalSupply",type:"uint128"},{name:"_json",type:"string"},{name:"owner_",type:"uint256"},{name:"_randomNonce",type:"uint32"},{name:"_remainOnNft",type:"uint128"}]},M={ABIversion:2,version:"2.2",header:["time"],functions:[{name:"constructor",inputs:[{name:"collection",type:"address"}],outputs:[]},{name:"getInfo",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"collection",type:"address"},{name:"owner",type:"address"},{name:"nft",type:"address"}]},{name:"destruct",inputs:[{name:"gasReceiver",type:"address"}],outputs:[]}],data:[{key:1,name:"_nft",type:"address"}],events:[],fields:[{name:"_pubkey",type:"uint256"},{name:"_timestamp",type:"uint64"},{name:"_constructorFlag",type:"bool"},{name:"_nft",type:"address"},{name:"_collection",type:"address"},{name:"_owner",type:"address"}]},R={ABIversion:2,version:"2.2",header:["time"],functions:[{name:"constructor",inputs:[],outputs:[]},{name:"getInfo",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"collection",type:"address"}]},{name:"destruct",inputs:[{name:"gasReceiver",type:"address"}],outputs:[]}],data:[{key:1,name:"_collection",type:"address"}],events:[],fields:[{name:"_pubkey",type:"uint256"},{name:"_timestamp",type:"uint64"},{name:"_constructorFlag",type:"bool"},{name:"_collection",type:"address"}]},O={ABIversion:2,version:"2.2",header:["pubkey","time","expire"],functions:[{name:"constructor",inputs:[{name:"owner",type:"address"},{name:"sendGasTo",type:"address"},{name:"remainOnNft",type:"uint128"},{name:"json",type:"string"},{components:[{name:"numerator",type:"uint128"},{name:"denominator",type:"uint128"},{name:"receiver",type:"address"}],name:"royalty",type:"tuple"}],outputs:[]},{name:"royaltyInfo",inputs:[{name:"answerId",type:"uint32"},{name:"salePrice",type:"uint128"}],outputs:[{name:"receiver",type:"address"},{name:"royaltyAmount",type:"uint128"}]},{name:"getJson",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"json",type:"string"}]},{name:"transfer",inputs:[{name:"to",type:"address"},{name:"sendGasTo",type:"address"},{components:[{name:"value",type:"uint128"},{name:"payload",type:"cell"}],name:"callbacks",type:"map(address,tuple)"}],outputs:[]},{name:"changeOwner",inputs:[{name:"newOwner",type:"address"},{name:"sendGasTo",type:"address"},{components:[{name:"value",type:"uint128"},{name:"payload",type:"cell"}],name:"callbacks",type:"map(address,tuple)"}],outputs:[]},{name:"changeManager",inputs:[{name:"newManager",type:"address"},{name:"sendGasTo",type:"address"},{components:[{name:"value",type:"uint128"},{name:"payload",type:"cell"}],name:"callbacks",type:"map(address,tuple)"}],outputs:[]},{name:"getInfo",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"id",type:"uint256"},{name:"owner",type:"address"},{name:"manager",type:"address"},{name:"collection",type:"address"}]},{name:"supportsInterface",inputs:[{name:"answerId",type:"uint32"},{name:"interfaceID",type:"uint32"}],outputs:[{name:"value0",type:"bool"}]}],data:[{key:1,name:"_id",type:"uint256"}],events:[{name:"NftCreated",inputs:[{name:"id",type:"uint256"},{name:"owner",type:"address"},{name:"manager",type:"address"},{name:"collection",type:"address"}],outputs:[]},{name:"OwnerChanged",inputs:[{name:"oldOwner",type:"address"},{name:"newOwner",type:"address"}],outputs:[]},{name:"ManagerChanged",inputs:[{name:"oldManager",type:"address"},{name:"newManager",type:"address"}],outputs:[]},{name:"NftBurned",inputs:[{name:"id",type:"uint256"},{name:"owner",type:"address"},{name:"manager",type:"address"},{name:"collection",type:"address"}],outputs:[]}],fields:[{name:"_pubkey",type:"uint256"},{name:"_timestamp",type:"uint64"},{name:"_constructorFlag",type:"bool"},{name:"_supportedInterfaces",type:"optional(cell)"},{name:"_id",type:"uint256"},{name:"_collection",type:"address"},{name:"_owner",type:"address"},{name:"_manager",type:"address"},{name:"_json",type:"string"},{components:[{name:"numerator",type:"uint128"},{name:"denominator",type:"uint128"},{name:"receiver",type:"address"}],name:"_royalty",type:"tuple"}]},E={Account:x,Collection:S,Index:M,IndexBasis:R,Nft:O},H=JSON.stringify({type:"Basic NFT",name:"Daemon #1",description:"A curated collection of 10,000 Agents from the Venom blockchain deployed on a mission to take over Web3",preview:{source:"https://images.pexels.com/photos/16115934/pexels-photo-16115934/free-photo-of-spooky-traditional-figurine.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",mimetype:"image/JPEG"},files:[{source:"https://images.pexels.com/photos/16115934/pexels-photo-16115934/free-photo-of-spooky-traditional-figurine.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",mimetype:"image/JPEG"}],external_url:"https://images.pexels.com",image:"/1.jpeg",attributes:[{trait_type:"Background",value:"Orange 2"},{trait_type:"Skin Color",value:"Lightskin 2"},{trait_type:"Apparel",value:"Vest"},{trait_type:"Eyes",value:"Werewolf"},{trait_type:"Mask",value:"Villain"},{trait_type:"Hair",value:"Prettyboy 2"},{trait_type:"Rarity Rank",value:6001,display_type:"number"}]}),j=JSON.stringify({type:"Basic NFT",name:"Revolt Agents",description:"A curated collection of 10,000 Agents from the Venom blockchain deployed on a mission to take over Web3",preview:{source:"https://images.pexels.com/photos/16115934/pexels-photo-16115934/free-photo-of-spooky-traditional-figurine.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",mimetype:"image/JPEG"},files:[{source:"https://images.pexels.com/photos/16115934/pexels-photo-16115934/free-photo-of-spooky-traditional-figurine.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",mimetype:"image/JPEG"}],external_url:"https://venom.network"});async function b(n=j){try{const[a,y]=await _(),t=E.Collection,e=(await a.getFullContractState({address:y})).state,D=await a.extractPublicKey(e.boc),F=await(await fetch("/scripts/artifacts/build_royalty/Collection.base64")).text(),r=await(await fetch("/scripts/artifacts/build_royalty/Nft.base64")).text(),l=(await a.splitTvc(r)).code,p={tvc:F,workchain:0,publicKey:D,initParams:{_randomNonce:Math.random()*6400|0}},d=await a.getExpectedAddress(t,p),m=await a.getStateInit(t,p);m.stateInit,await a.sendMessage({sender:y,recipient:d,amount:String(2*10**9),bounce:!1,stateInit:m.stateInit});const B=new a.Contract(t,d),{transaction:f}=await B.methods.constructor({codeNft:l,ownerPubkey:`0x${p.publicKey}`,json:n}).sendExternal({stateInit:m.stateInit,publicKey:p.publicKey});return(await B.methods.totalSupply({answerId:0}).call()).count=="0"?(o("Collection deployed successfully",1),`TIP4_1 collection deployed to ${d.toString()}`):(o("Collection deployment failed",0),`TIP4_1 collection deployment failed ! ${f.exitCode,f.resultCode}`)}catch(a){return o(a.message,0),a.message}}async function v(n,a,y=H){try{const[t,e]=await _();if(!C(t,n))return o("Please enter a valid collection address !",0),"Failed";if(!C(t,a.receiver))return o("Please enter a valid royalty receiver address !",0),"Failed";const D=E.Collection,F=E.Nft,r=new t.Contract(D,new h.Address(n));r.getFullState;const l=Number((await r.methods.totalSupply({answerId:0}).call()).count),p=await r.methods.mintNft({json:y,royalty:{numerator:a.numerator,denominator:a.denominator,receiver:new h.Address(a.receiver)}}).send({from:e,amount:String(2*10**9),bounce:!0});if(p.aborted)return`minting Nft failed ${p.exitCode,p.resultCode}`;const d=(await r.methods.nftAddress({answerId:0,id:l}).call()).nft,B=await new t.Contract(F,d).methods.getInfo({answerId:0}).call();return B.collection.toString()==n.toString()?(o(`Nft number ${B.id} Minted successfully`,1),`Nft number ${B.id} deployed to ${d.toString()}`):(o("Minting Nft failed",0),`TIP4_1 Nft deployment failed ! ${p.exitCode,p.resultCode}`)}catch(t){return o(t.message,0),t.message}}const $=I({name:"deployToken",components:{ImgContainer:w,loading:N},data(){return{LLdis:"cbShow",EIPdis:"cbHide",llAction:"llAction cbShow",eipAction:"eipAction cbHide",eipActionNft:"eipAction cbHide",eipActionCollection:"eipAction cbHide",collMeta:"cbHide",nftMeta:"cbHide",loadingText:" ",loadingText2:" "}},setup(){async function n(e){e.target.checked?e.target.parentElement.className.includes("collectionMetaCheck")?this.collMeta="cbHide":e.target.parentElement.className.includes("nftMetaCheck")&&(this.nftMeta="cbHide"):e.target.parentElement.className.includes("collectionMetaCheck")?this.collMeta="action Ain":e.target.parentElement.className.includes("nftMetaCheck")&&(this.nftMeta="action Ain")}async function a(){if(this.loadingText="",!this.$refs.actionCollectionMetaDefault.checked&&this.$refs.actionCollectionMeta.value==""){o("Collection metadata field is required !",0),this.loadingText="Failed";return}let e;this.$refs.actionCollectionMetaDefault.checked?e=await b():e=await b(this.$refs.actionCollectionMeta.value),e=e||"Failed",this.loadingText=e}async function y(){if(this.loadingText2="",this.$refs.actionCollectionAddress.value==""){o("collection address field is required !",0),this.loadingText2="Failed";return}if(!this.$refs.actionNftMetaDefault.checked&&this.$refs.actionNftMeta.value==""){o("Nft metadata field is required !",0),this.loadingText2="Failed";return}if(isNaN(Number(this.$refs.actionRoyaltyPercent.value))){o("Royalty percentage field is required !",0),this.loadingText2="Failed";return}if(this.$refs.actionRoyaltyReceiverAddress.value==""){o("Royalty receiver address field is required !",0),this.loadingText2="Failed";return}let e;const D={numerator:Number(this.$refs.actionRoyaltyPercent.value),denominator:100,receiver:this.$refs.actionRoyaltyReceiverAddress.value};this.$refs.actionNftMetaDefault.checked?e=await v(this.$refs.actionCollectionAddress.value,D):e=await v(this.$refs.actionCollectionAddress.value,this.$refs.actionNftMeta.value,D),e=e||"Failed",this.loadingText2=e}async function t(e){e.target.innerHTML.includes("everscale-inpage-provider(collection)")?(this.LLdis="cbHide",this.EIPdis="cbShow",this.llAction="llAction cbHide",this.eipAction="eipAction cbShow",this.eipActionNft="eipAction cbHide",this.eipActionCollection="eipAction cbShow"):e.target.innerHTML.includes("everscale-inpage-provider(nft)")?(this.LLdis="cbHide",this.EIPdis="cbShow",this.llAction="llAction cbHide",this.eipAction="eipAction cbShow",this.eipActionCollection="eipAction cbHide",this.eipActionNft="eipAction cbShow"):e.target.innerHTML.includes("locklift")&&(this.EIPdis="cbHide",this.LLdis="cbShow",this.llAction="llAction cbShow",this.eipAction="eipAction cbHide")}return{defaultMetaHandler:n,deployNft:y,deployCollection:a,codeBlockSwitchHandler:t}}}),As=JSON.parse('{"title":"TIP4_Royalty","description":"","frontmatter":{},"headers":[],"relativePath":"docs/usage/typical/royalty.md","filePath":"docs/usage/typical/royalty.md"}');const q=s("h1",{id:"tip4-royalty",tabindex:"-1"},[i("TIP4_Royalty "),s("a",{class:"header-anchor",href:"#tip4-royalty","aria-label":'Permalink to "TIP4_Royalty"'},"​")],-1),L={class:"deployToken"},J=u(`<p>This section presents the implementation of the royalty feature in the <code>TIP-4</code> NFT standard. This implementation allows users of the NFT to fetch royalty information for a specific NFT ID and enables NFT marketplaces to apply royalty rules and payments within their platforms.</p><h2 id="step-1-prepare-the-contracts" tabindex="-1">Step 1: Prepare the Contracts <a class="header-anchor" href="#step-1-prepare-the-contracts" aria-label="Permalink to &quot;Step 1: Prepare the Contracts&quot;">​</a></h2><h3 id="nft-contract" tabindex="-1">Nft Contract <a class="header-anchor" href="#nft-contract" aria-label="Permalink to &quot;Nft Contract&quot;">​</a></h3><p>Sync the <code>Nft.tsol</code> contract code with the code below to make the base nft contract able to use the royalty feature.</p><details><summary> show code</summary><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">pragma</span><span style="color:#BABED8;"> ever</span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;">solidity </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0.61</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">pragma</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">AbiHeader</span><span style="color:#BABED8;"> expire</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">pragma</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">AbiHeader</span><span style="color:#BABED8;"> time</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">pragma</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">AbiHeader</span><span style="color:#BABED8;"> pubkey</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">&#39;@broxus/tip4/contracts/TIP4_2/TIP4_2Nft.tsol&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">&#39;@broxus/tip4/contracts/TIP4_royalty/TIP4_royaltyNft.tsol&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">&#39;@broxus/tip4/contracts/TIP4_royalty/structures/IRoyaltyStructure.tsol&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">contract</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Nft</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">is</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">TIP4_2Nft</span><span style="color:#BABED8;">, </span><span style="color:#FFCB6B;">TIP4_royaltyNft</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">address</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">owner</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">address</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">sendGasTo</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">uint128</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">remainOnNft</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">string</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">json</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#C792EA;">Royalty</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">royalty</span></span>
<span class="line"><span style="color:#BABED8;">    ) </span><span style="color:#82AAFF;">TIP4_1Nft</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">        owner,</span></span>
<span class="line"><span style="color:#BABED8;">        sendGasTo,</span></span>
<span class="line"><span style="color:#BABED8;">        remainOnNft</span></span>
<span class="line"><span style="color:#BABED8;">    )  </span><span style="color:#82AAFF;">TIP4_2Nft</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">        json</span></span>
<span class="line"><span style="color:#BABED8;">    ) </span><span style="color:#82AAFF;">TIP4_royaltyNft</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">        royalty</span></span>
<span class="line"><span style="color:#BABED8;">    ) </span><span style="color:#C792EA;">public</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        tvm</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">accept</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></details><h3 id="collection-contract" tabindex="-1">Collection Contract <a class="header-anchor" href="#collection-contract" aria-label="Permalink to &quot;Collection Contract&quot;">​</a></h3><p>Import the <code>IRoyaltyStructure</code> and add the royalty when minting an nft.</p><details><summary> show code</summary><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">pragma</span><span style="color:#BABED8;"> ever</span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;">solidity </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0.61</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">pragma</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">AbiHeader</span><span style="color:#BABED8;"> expire</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">pragma</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">AbiHeader</span><span style="color:#BABED8;"> time</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">pragma</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">AbiHeader</span><span style="color:#BABED8;"> pubkey</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">&#39;@broxus/tip4/contracts/access/OwnableExternal.tsol&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">&#39;@broxus/tip4/contracts/TIP4_2/TIP4_2Collection.tsol&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">&#39;@broxus/tip4/contracts/TIP4_royalty/structures/IRoyaltyStructure.tsol&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">&#39;./Nft.tsol&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">contract</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Collection</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">is</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">TIP4_2Collection</span><span style="color:#BABED8;">, </span><span style="color:#FFCB6B;">OwnableExternal</span><span style="color:#BABED8;">, </span><span style="color:#FFCB6B;">IRoyaltyStructure</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">uint32</span><span style="color:#BABED8;"> static _randomNonce</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    * Errors</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    **/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">uint8</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">constant</span><span style="color:#BABED8;"> sender_is_not_owner </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">uint8</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">constant</span><span style="color:#BABED8;"> value_is_less_than_required </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">101</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#676E95;font-style:italic;">/// _remainOnNft - the number of crystals that will remain after the entire mint</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#676E95;font-style:italic;">/// process is completed on the Nft contract</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">uint128</span><span style="color:#BABED8;"> _remainOnNft </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0.3</span><span style="color:#BABED8;"> ever</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#C792EA;">TvmCell</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">codeNft</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">uint256</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">ownerPubkey</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">string</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">json</span></span>
<span class="line"><span style="color:#BABED8;">    ) </span><span style="color:#82AAFF;">OwnableExternal</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">        ownerPubkey</span></span>
<span class="line"><span style="color:#BABED8;">    ) </span><span style="color:#82AAFF;">TIP4_1Collection</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">        codeNft</span></span>
<span class="line"><span style="color:#BABED8;">    ) </span><span style="color:#82AAFF;">TIP4_2Collection</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">        json</span></span>
<span class="line"><span style="color:#BABED8;">    ) </span><span style="color:#C792EA;">public</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        tvm</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">accept</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">mintNft</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">string</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">json</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">Royalty</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">royalty</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">external</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">virtual</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;font-style:italic;">require</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">msg</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">value </span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;"> _remainOnNft </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0.1</span><span style="color:#BABED8;"> ever</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> value_is_less_than_required</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">        tvm</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">rawReserve</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">uint256</span><span style="color:#BABED8;"> id </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">uint256</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">_totalSupply</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">        _totalSupply</span><span style="color:#89DDFF;">++;</span></span>
<span class="line"><span style="color:#BABED8;">        TvmCell codeNft </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">_buildNftCode</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">address</span><span style="color:#89DDFF;">(this));</span></span>
<span class="line"><span style="color:#BABED8;">        TvmCell stateNft </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">_buildNftState</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">codeNft</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> id</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">address</span><span style="color:#BABED8;"> nftAddr </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#BABED8;"> Nft</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">            stateInit</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> stateNft</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">            value</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">            flag</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">128</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;">}(</span></span>
<span class="line"><span style="color:#BABED8;">            msg.sender</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">            msg.sender</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">            _remainOnNft</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">            json</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">            royalty</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;font-style:italic;">emit</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">NftCreated</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">            id</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">            nftAddr</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">            msg.sender</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">            msg.sender</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">            msg.sender</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">setRemainOnNft</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uint128</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">remainOnNft</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">external</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">virtual</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;font-style:italic;">require</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">TIP4_1Collection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_isOwner</span><span style="color:#89DDFF;">(),</span><span style="color:#BABED8;"> sender_is_not_owner</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#BABED8;">        _remainOnNft </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> remainOnNft</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">_isOwner</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">internal</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">override</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">onlyOwner</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">bool</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">_buildNftState</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#C792EA;">TvmCell</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">code</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">uint256</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">id</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">internal</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">virtual</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">override</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">TIP4_2Collection</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">pure</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">returns</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TvmCell</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#BABED8;"> tvm</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">buildStateInit</span><span style="color:#89DDFF;">({</span></span>
<span class="line"><span style="color:#BABED8;">            contr</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> Nft</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">            varInit</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;">_id</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> id</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">            code</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> code</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></details><h3 id="build-the-contracts-artifacts" tabindex="-1">Build the Contracts Artifacts <a class="header-anchor" href="#build-the-contracts-artifacts" aria-label="Permalink to &quot;Build the Contracts Artifacts&quot;">​</a></h3><p>run the command below into your terminal to build the written contracts artifacts:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npx</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">locklift</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">build</span></span></code></pre></div><h3 id="store-contracts-code-and-tvc" tabindex="-1">Store Contracts Code and tvc <a class="header-anchor" href="#store-contracts-code-and-tvc" aria-label="Permalink to &quot;Store Contracts Code and tvc&quot;">​</a></h3><p>In order to deploy a contract using the <code>everscale-inpage-provider</code> tool we need the target contracts code and tvc.</p><p>Copy the build folder generated by the mentioned commend into the scripts folder of your project that using the <code>everscale-inpage-provider</code>.</p><h2 id="step-2-write-deployment-script" tabindex="-1">Step 2: Write Deployment Script <a class="header-anchor" href="#step-2-write-deployment-script" aria-label="Permalink to &quot;Step 2: Write Deployment Script&quot;">​</a></h2>`,15),G=u('<p>We can apply the changes mentioned in the code sample below into our <a href="./2.html#step-2-write-deployment-script">previously written script</a> on deploying the <code>TIP4_2</code> contracts and use it next to the <code>locklift</code> tool un order deploy the <code>TIP4_Royalty</code> contracts.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Before we start to write our scripts we need to make sure that there is a file named <code>03-deploy-tip4-royalty.ts</code> in the <code>script</code> folder in the project root.</p></div>',2),V=[G],K=u('<p>The code sample below is utilized to deploy the mentioned contract using <code>everscale-inpage-provider</code> tool.</p><p>Edit the script on deploying <code>TIP4_2</code> contracts from the <a href="./2.html#step-2-write-deployment-script">previous part</a> based on the changes of following scripts on deploying the nft and collection contracts of <code>TIP4_Royalty</code>.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The code sample for deploying the collection contract of this part using <code>everscale-inpage-provider</code> will stay <code>untouched</code>.</p></div>',3),W=[K],U=u(`<div class="vp-code-group"><div class="tabs"><input type="radio" name="group-8SehJ" id="tab-UtNww5w" checked="checked"><label for="tab-UtNww5w">locklift</label><input type="radio" name="group-8SehJ" id="tab-xAfexsq"><label for="tab-xAfexsq">everscale-inpage-provider(nft)</label></div><div class="blocks"><div class="language-typescript active"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Defining a new interface to pass to the royalty information</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">IRoyaltyStructure</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">numerator</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">denominator</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">receiver</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Address</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Preparing the royalty info</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> royalty</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">IRoyaltyStructure</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">numerator</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">denominator</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">receiver</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> account</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">address</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// adding the prepared params as the input of the mint function</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#BABED8;"> collectionContract</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">methods</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">mintNft</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">json</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> nftJsonMetadata</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">royalty</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> royalty </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">) </span><span style="color:#676E95;font-style:italic;">// added royalty</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">from</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> account</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">address</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">amount</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> locklift</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toNano</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;">) </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Replace the line below with its according line from previous script</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#BABED8;"> nftContract</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">methods</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">royaltyInfo</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">answerId</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">salePrice</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">100_000_000</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#BABED8;">())</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 100$</span></span></code></pre></div><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">IRoyaltyStructure</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">numerator</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">denominator</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">receiver</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Address</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> mintRes</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Transaction</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#BABED8;"> collectionContract</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">methods</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">mintNft</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">json</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> jsonObj</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">royalty</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> royalty </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">from</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> providerAddress</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">amount</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">String</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">10</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">**</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">9</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">bounce</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div></div></div>`,1),z=[U],Q={class:"action"},X=s("h2",{id:"step-3-deploy-the-nft",tabindex:"-1"},[i("Step 3: Deploy the NFT "),s("a",{class:"header-anchor",href:"#step-3-deploy-the-nft","aria-label":'Permalink to "Step 3: Deploy the NFT"'},"​")],-1),Y=u('<p>Use this command to deploy TIP-3 tokens:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npx</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">locklift</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">run</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">./scripts/01-deploy-tip4-1.ts</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-n</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">local</span></span></code></pre></div>',2),Z=s("p",null,[i("Congratulations, you have successfully deployed an NFT contract with royalty support using the "),s("code",null,"TIP4_1"),i(" standard 🎉")],-1),ss=s("h3",{id:"deploy-tip4-1-collection",tabindex:"-1"},[i("Deploy TIP4_1 Collection "),s("a",{class:"header-anchor",href:"#deploy-tip4-1-collection","aria-label":'Permalink to "Deploy TIP4_1 Collection"'},"​")],-1),ns={class:"container collectionMetaCheck"},as=s("span",{class:"checkmark"},null,-1),es=s("h3",{id:"mint-tip4-1-nft",tabindex:"-1"},[i("Mint TIP4_1 Nft "),s("a",{class:"header-anchor",href:"#mint-tip4-1-nft","aria-label":'Permalink to "Mint TIP4_1 Nft"'},"​")],-1),ts=s("p",{class:"actionInName",style:{"margin-bottom":"0"}},"Collection Address",-1),ls={ref:"actionCollectionAddress",class:"action Ain",type:"text"},os={class:"container nftMetaCheck"},ps=s("span",{class:"checkmark"},null,-1),cs=s("p",{class:"actionInName",style:{"margin-bottom":"0"}},"Royalty Percentage",-1),rs={ref:"actionRoyaltyPercent",type:"number",min:"0",max:"100",step:"0.01",class:"action Ain percent"},is=s("p",{class:"actionInName",style:{"margin-bottom":"0"}},"Royalty Receiver Address",-1),ys={ref:"actionRoyaltyReceiverAddress",class:"action Ain",type:"text"};function Ds(n,a,y,t,e,D){const F=g("ImgContainer"),r=g("loading");return P(),T("div",null,[q,s("div",L,[J,s("span",{class:c(n.LLdis)},V,2),s("span",{class:c(n.EIPdis)},W,2),s("div",{onClick:a[0]||(a[0]=(...l)=>n.codeBlockSwitchHandler&&n.codeBlockSwitchHandler(...l))},z),s("div",Q,[X,s("div",{class:c(n.llAction)},[Y,A(F,{src:"/typicalRoyalty.png",width:"100%",altText:"deployTip3Output"}),Z],2),s("div",{class:c(n.eipAction)},[s("div",{class:c(n.eipActionNft)},[ss,s("p",null,[s("label",ns,[i(" Use default metadata "),s("input",{class:"checkboxInput",ref:"actionCollectionMetaDefault",type:"checkbox",onClick:a[1]||(a[1]=(...l)=>n.defaultMetaHandler&&n.defaultMetaHandler(...l)),checked:"true"},null,512),as])]),s("p",null,[s("textarea",{style:{resize:"none"},ref:"actionCollectionMeta",class:c(n.collMeta),type:"text",placeholder:"collection json metadata"},null,2)]),s("p",null,[s("button",{onClick:a[2]||(a[2]=(...l)=>n.deployCollection&&n.deployCollection(...l)),class:"deployTokenBut"},"deploy collection")]),s("p",{id:"output-p",class:c(n.EIPdis)},[A(r,{text:n.loadingText},null,8,["text"])],2)],2),s("div",{class:c(n.eipActionNft)},[es,ts,s("input",ls,null,512),s("p",null,[s("label",os,[i(" Use default metadata "),s("input",{class:"checkboxInput",ref:"actionNftMetaDefault",type:"checkbox",onClick:a[3]||(a[3]=(...l)=>n.defaultMetaHandler&&n.defaultMetaHandler(...l)),checked:"true"},null,512),ps])]),s("p",null,[s("textarea",{ref:"actionNftMeta",class:c(n.nftMeta),type:"text",placeholder:"Nft json metadata"},null,2)]),cs,s("input",rs,null,512),is,s("input",ys,null,512),s("p",null,[s("button",{onClick:a[4]||(a[4]=(...l)=>n.deployNft&&n.deployNft(...l)),class:"deployTokenBut"},"Mint Nft")]),s("p",{id:"output-p",class:c(n.EIPdis)},[A(r,{text:n.loadingText2},null,8,["text"])],2)],2)],2)])])])}const Es=k($,[["render",Ds]]);export{As as __pageData,Es as default};
