import{d as H,ao as wt,l as gt,c as E,U as Ke,n as ee,b as $,w as we,R as je,O as Re,J as Y,e as le,k as z,K as ve,a as ge,t as te,a1 as yt,a3 as _t,ap as Tt,L as Ee,o as P,r as Pt,N as St,D as We,$ as Ct,S as Ot,E as Ge,aq as Je,_ as It,h as oe,g as Fe,p as Et,m as At,C as kt,z as Mt,an as Lt}from"./framework.6ec58a3b.js";var jt=Object.defineProperty,Ne=Object.getOwnPropertySymbols,Rt=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable,qe=(e,t,s)=>t in e?jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Xe=(e,t)=>{for(var s in t||(t={}))Rt.call(t,s)&&qe(e,s,t[s]);if(Ne)for(var s of Ne(t))Dt.call(t,s)&&qe(e,s,t[s]);return e},ye=e=>typeof e=="function",_e=e=>typeof e=="string",Qe=e=>_e(e)&&e.trim().length>0,zt=e=>typeof e=="number",W=e=>typeof e>"u",se=e=>typeof e=="object"&&e!==null,Bt=e=>N(e,"tag")&&Qe(e.tag),Ye=e=>window.TouchEvent&&e instanceof TouchEvent,Ze=e=>N(e,"component")&&et(e.component),xt=e=>ye(e)||se(e),et=e=>!W(e)&&(_e(e)||xt(e)||Ze(e)),Ue=e=>se(e)&&["height","width","right","left","top","bottom"].every(t=>zt(e[t])),N=(e,t)=>(se(e)||ye(e))&&t in e,Ft=(e=>()=>e++)(0);function Ce(e){return Ye(e)?e.targetTouches[0].clientX:e.clientX}function Ve(e){return Ye(e)?e.targetTouches[0].clientY:e.clientY}var Nt=e=>{W(e.remove)?e.parentNode&&e.parentNode.removeChild(e):e.remove()},ce=e=>Ze(e)?ce(e.component):Bt(e)?H({render(){return e}}):typeof e=="string"?e:wt(gt(e)),qt=e=>{if(typeof e=="string")return e;const t=N(e,"props")&&se(e.props)?e.props:{},s=N(e,"listeners")&&se(e.listeners)?e.listeners:{};return{component:ce(e),props:t,listeners:s}},Ut=()=>typeof window<"u",Te=class{constructor(){this.allHandlers={}}getHandlers(e){return this.allHandlers[e]||[]}on(e,t){const s=this.getHandlers(e);s.push(t),this.allHandlers[e]=s}off(e,t){const s=this.getHandlers(e);s.splice(s.indexOf(t)>>>0,1)}emit(e,t){this.getHandlers(e).forEach(n=>n(t))}},Vt=e=>["on","off","emit"].every(t=>N(e,t)&&ye(e[t])),j;(function(e){e.SUCCESS="success",e.ERROR="error",e.WARNING="warning",e.INFO="info",e.DEFAULT="default"})(j||(j={}));var ne;(function(e){e.TOP_LEFT="top-left",e.TOP_CENTER="top-center",e.TOP_RIGHT="top-right",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_CENTER="bottom-center",e.BOTTOM_RIGHT="bottom-right"})(ne||(ne={}));var R;(function(e){e.ADD="add",e.DISMISS="dismiss",e.UPDATE="update",e.CLEAR="clear",e.UPDATE_DEFAULTS="update_defaults"})(R||(R={}));var x="Vue-Toastification",B={type:{type:String,default:j.DEFAULT},classNames:{type:[String,Array],default:()=>[]},trueBoolean:{type:Boolean,default:!0}},tt={type:B.type,customIcon:{type:[String,Boolean,Object,Function],default:!0}},he={component:{type:[String,Object,Function,Boolean],default:"button"},classNames:B.classNames,showOnHover:{type:Boolean,default:!1},ariaLabel:{type:String,default:"close"}},Ae={timeout:{type:[Number,Boolean],default:5e3},hideProgressBar:{type:Boolean,default:!1},isRunning:{type:Boolean,default:!1}},st={transition:{type:[Object,String],default:`${x}__bounce`}},$t={position:{type:String,default:ne.TOP_RIGHT},draggable:B.trueBoolean,draggablePercent:{type:Number,default:.6},pauseOnFocusLoss:B.trueBoolean,pauseOnHover:B.trueBoolean,closeOnClick:B.trueBoolean,timeout:Ae.timeout,hideProgressBar:Ae.hideProgressBar,toastClassName:B.classNames,bodyClassName:B.classNames,icon:tt.customIcon,closeButton:he.component,closeButtonClassName:he.classNames,showCloseButtonOnHover:he.showOnHover,accessibility:{type:Object,default:()=>({toastRole:"alert",closeButtonLabel:"close"})},rtl:{type:Boolean,default:!1},eventBus:{type:Object,required:!1,default:()=>new Te}},Ht={id:{type:[String,Number],required:!0,default:0},type:B.type,content:{type:[String,Object,Function],required:!0,default:""},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0}},Kt={container:{type:[Object,Function],default:()=>document.body},newestOnTop:B.trueBoolean,maxToasts:{type:Number,default:20},transition:st.transition,toastDefaults:Object,filterBeforeCreate:{type:Function,default:e=>e},filterToasts:{type:Function,default:e=>e},containerClassName:B.classNames,onMounted:Function,shareAppContext:[Boolean,Object]},U={CORE_TOAST:$t,TOAST:Ht,CONTAINER:Kt,PROGRESS_BAR:Ae,ICON:tt,TRANSITION:st,CLOSE_BUTTON:he},nt=H({name:"VtProgressBar",props:U.PROGRESS_BAR,data(){return{hasClass:!0}},computed:{style(){return{animationDuration:`${this.timeout}ms`,animationPlayState:this.isRunning?"running":"paused",opacity:this.hideProgressBar?0:1}},cpClass(){return this.hasClass?`${x}__progress-bar`:""}},watch:{timeout(){this.hasClass=!1,this.$nextTick(()=>this.hasClass=!0)}},mounted(){this.$el.addEventListener("animationend",this.animationEnded)},beforeUnmount(){this.$el.removeEventListener("animationend",this.animationEnded)},methods:{animationEnded(){this.$emit("close-toast")}}});function Wt(e,t){return P(),E("div",{style:Ke(e.style),class:ee(e.cpClass)},null,6)}nt.render=Wt;var Gt=nt,it=H({name:"VtCloseButton",props:U.CLOSE_BUTTON,computed:{buttonComponent(){return this.component!==!1?ce(this.component):"button"},classes(){const e=[`${x}__close-button`];return this.showOnHover&&e.push("show-on-hover"),e.concat(this.classNames)}}}),Jt=ge(" Ã— ");function Xt(e,t){return P(),$(Re(e.buttonComponent),je({"aria-label":e.ariaLabel,class:e.classes},e.$attrs),{default:we(()=>[Jt]),_:1},16,["aria-label","class"])}it.render=Xt;var Qt=it,rt={},Yt={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"svg-inline--fa fa-check-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Zt=z("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},null,-1),es=[Zt];function ts(e,t){return P(),E("svg",Yt,es)}rt.render=ts;var ss=rt,at={},ns={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"info-circle",class:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},is=z("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},null,-1),rs=[is];function as(e,t){return P(),E("svg",ns,rs)}at.render=as;var $e=at,ot={},os={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-circle",class:"svg-inline--fa fa-exclamation-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},cs=z("path",{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),us=[cs];function ds(e,t){return P(),E("svg",os,us)}ot.render=ds;var ls=ot,ct={},hs={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-triangle",class:"svg-inline--fa fa-exclamation-triangle fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},ps=z("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),fs=[ps];function vs(e,t){return P(),E("svg",hs,fs)}ct.render=vs;var ms=ct,ut=H({name:"VtIcon",props:U.ICON,computed:{customIconChildren(){return N(this.customIcon,"iconChildren")?this.trimValue(this.customIcon.iconChildren):""},customIconClass(){return _e(this.customIcon)?this.trimValue(this.customIcon):N(this.customIcon,"iconClass")?this.trimValue(this.customIcon.iconClass):""},customIconTag(){return N(this.customIcon,"iconTag")?this.trimValue(this.customIcon.iconTag,"i"):"i"},hasCustomIcon(){return this.customIconClass.length>0},component(){return this.hasCustomIcon?this.customIconTag:et(this.customIcon)?ce(this.customIcon):this.iconTypeComponent},iconTypeComponent(){return{[j.DEFAULT]:$e,[j.INFO]:$e,[j.SUCCESS]:ss,[j.ERROR]:ms,[j.WARNING]:ls}[this.type]},iconClasses(){const e=[`${x}__icon`];return this.hasCustomIcon?e.concat(this.customIconClass):e}},methods:{trimValue(e,t=""){return Qe(e)?e.trim():t}}});function bs(e,t){return P(),$(Re(e.component),{class:ee(e.iconClasses)},{default:we(()=>[ge(te(e.customIconChildren),1)]),_:1},8,["class"])}ut.render=bs;var ws=ut,dt=H({name:"VtToast",components:{ProgressBar:Gt,CloseButton:Qt,Icon:ws},inheritAttrs:!1,props:Object.assign({},U.CORE_TOAST,U.TOAST),data(){return{isRunning:!0,disableTransitions:!1,beingDragged:!1,dragStart:0,dragPos:{x:0,y:0},dragRect:{}}},computed:{classes(){const e=[`${x}__toast`,`${x}__toast--${this.type}`,`${this.position}`].concat(this.toastClassName);return this.disableTransitions&&e.push("disable-transition"),this.rtl&&e.push(`${x}__toast--rtl`),e},bodyClasses(){return[`${x}__toast-${_e(this.content)?"body":"component-body"}`].concat(this.bodyClassName)},draggableStyle(){return this.dragStart===this.dragPos.x?{}:this.beingDragged?{transform:`translateX(${this.dragDelta}px)`,opacity:1-Math.abs(this.dragDelta/this.removalDistance)}:{transition:"transform 0.2s, opacity 0.2s",transform:"translateX(0)",opacity:1}},dragDelta(){return this.beingDragged?this.dragPos.x-this.dragStart:0},removalDistance(){return Ue(this.dragRect)?(this.dragRect.right-this.dragRect.left)*this.draggablePercent:0}},mounted(){this.draggable&&this.draggableSetup(),this.pauseOnFocusLoss&&this.focusSetup()},beforeUnmount(){this.draggable&&this.draggableCleanup(),this.pauseOnFocusLoss&&this.focusCleanup()},methods:{hasProp:N,getVueComponentFromObj:ce,closeToast(){this.eventBus.emit(R.DISMISS,this.id)},clickHandler(){this.onClick&&this.onClick(this.closeToast),this.closeOnClick&&(!this.beingDragged||this.dragStart===this.dragPos.x)&&this.closeToast()},timeoutHandler(){this.closeToast()},hoverPause(){this.pauseOnHover&&(this.isRunning=!1)},hoverPlay(){this.pauseOnHover&&(this.isRunning=!0)},focusPause(){this.isRunning=!1},focusPlay(){this.isRunning=!0},focusSetup(){addEventListener("blur",this.focusPause),addEventListener("focus",this.focusPlay)},focusCleanup(){removeEventListener("blur",this.focusPause),removeEventListener("focus",this.focusPlay)},draggableSetup(){const e=this.$el;e.addEventListener("touchstart",this.onDragStart,{passive:!0}),e.addEventListener("mousedown",this.onDragStart),addEventListener("touchmove",this.onDragMove,{passive:!1}),addEventListener("mousemove",this.onDragMove),addEventListener("touchend",this.onDragEnd),addEventListener("mouseup",this.onDragEnd)},draggableCleanup(){const e=this.$el;e.removeEventListener("touchstart",this.onDragStart),e.removeEventListener("mousedown",this.onDragStart),removeEventListener("touchmove",this.onDragMove),removeEventListener("mousemove",this.onDragMove),removeEventListener("touchend",this.onDragEnd),removeEventListener("mouseup",this.onDragEnd)},onDragStart(e){this.beingDragged=!0,this.dragPos={x:Ce(e),y:Ve(e)},this.dragStart=Ce(e),this.dragRect=this.$el.getBoundingClientRect()},onDragMove(e){this.beingDragged&&(e.preventDefault(),this.isRunning&&(this.isRunning=!1),this.dragPos={x:Ce(e),y:Ve(e)})},onDragEnd(){this.beingDragged&&(Math.abs(this.dragDelta)>=this.removalDistance?(this.disableTransitions=!0,this.$nextTick(()=>this.closeToast())):setTimeout(()=>{this.beingDragged=!1,Ue(this.dragRect)&&this.pauseOnHover&&this.dragRect.bottom>=this.dragPos.y&&this.dragPos.y>=this.dragRect.top&&this.dragRect.left<=this.dragPos.x&&this.dragPos.x<=this.dragRect.right?this.isRunning=!1:this.isRunning=!0}))}}}),gs=["role"];function ys(e,t){const s=Y("Icon"),n=Y("CloseButton"),r=Y("ProgressBar");return P(),E("div",{class:ee(e.classes),style:Ke(e.draggableStyle),onClick:t[0]||(t[0]=(...i)=>e.clickHandler&&e.clickHandler(...i)),onMouseenter:t[1]||(t[1]=(...i)=>e.hoverPause&&e.hoverPause(...i)),onMouseleave:t[2]||(t[2]=(...i)=>e.hoverPlay&&e.hoverPlay(...i))},[e.icon?(P(),$(s,{key:0,"custom-icon":e.icon,type:e.type},null,8,["custom-icon","type"])):le("v-if",!0),z("div",{role:e.accessibility.toastRole||"alert",class:ee(e.bodyClasses)},[typeof e.content=="string"?(P(),E(ve,{key:0},[ge(te(e.content),1)],2112)):(P(),$(Re(e.getVueComponentFromObj(e.content)),je({key:1,"toast-id":e.id},e.hasProp(e.content,"props")?e.content.props:{},yt(e.hasProp(e.content,"listeners")?e.content.listeners:{}),{onCloseToast:e.closeToast}),null,16,["toast-id","onCloseToast"]))],10,gs),e.closeButton?(P(),$(n,{key:1,component:e.closeButton,"class-names":e.closeButtonClassName,"show-on-hover":e.showCloseButtonOnHover,"aria-label":e.accessibility.closeButtonLabel,onClick:_t(e.closeToast,["stop"])},null,8,["component","class-names","show-on-hover","aria-label","onClick"])):le("v-if",!0),e.timeout?(P(),$(r,{key:2,"is-running":e.isRunning,"hide-progress-bar":e.hideProgressBar,timeout:e.timeout,onCloseToast:e.timeoutHandler},null,8,["is-running","hide-progress-bar","timeout","onCloseToast"])):le("v-if",!0)],38)}dt.render=ys;var _s=dt,lt=H({name:"VtTransition",props:U.TRANSITION,emits:["leave"],methods:{hasProp:N,leave(e){e instanceof HTMLElement&&(e.style.left=e.offsetLeft+"px",e.style.top=e.offsetTop+"px",e.style.width=getComputedStyle(e).width,e.style.position="absolute")}}});function Ts(e,t){return P(),$(Tt,{tag:"div","enter-active-class":e.transition.enter?e.transition.enter:`${e.transition}-enter-active`,"move-class":e.transition.move?e.transition.move:`${e.transition}-move`,"leave-active-class":e.transition.leave?e.transition.leave:`${e.transition}-leave-active`,onLeave:e.leave},{default:we(()=>[Pt(e.$slots,"default")]),_:3},8,["enter-active-class","move-class","leave-active-class","onLeave"])}lt.render=Ts;var Ps=lt,ht=H({name:"VueToastification",devtools:{hide:!0},components:{Toast:_s,VtTransition:Ps},props:Object.assign({},U.CORE_TOAST,U.CONTAINER,U.TRANSITION),data(){return{count:0,positions:Object.values(ne),toasts:{},defaults:{}}},computed:{toastArray(){return Object.values(this.toasts)},filteredToasts(){return this.defaults.filterToasts(this.toastArray)}},beforeMount(){const e=this.eventBus;e.on(R.ADD,this.addToast),e.on(R.CLEAR,this.clearToasts),e.on(R.DISMISS,this.dismissToast),e.on(R.UPDATE,this.updateToast),e.on(R.UPDATE_DEFAULTS,this.updateDefaults),this.defaults=this.$props},mounted(){this.setup(this.container)},methods:{async setup(e){ye(e)&&(e=await e()),Nt(this.$el),e.appendChild(this.$el)},setToast(e){W(e.id)||(this.toasts[e.id]=e)},addToast(e){e.content=qt(e.content);const t=Object.assign({},this.defaults,e.type&&this.defaults.toastDefaults&&this.defaults.toastDefaults[e.type],e),s=this.defaults.filterBeforeCreate(t,this.toastArray);s&&this.setToast(s)},dismissToast(e){const t=this.toasts[e];!W(t)&&!W(t.onClose)&&t.onClose(),delete this.toasts[e]},clearToasts(){Object.keys(this.toasts).forEach(e=>{this.dismissToast(e)})},getPositionToasts(e){const t=this.filteredToasts.filter(s=>s.position===e).slice(0,this.defaults.maxToasts);return this.defaults.newestOnTop?t.reverse():t},updateDefaults(e){W(e.container)||this.setup(e.container),this.defaults=Object.assign({},this.defaults,e)},updateToast({id:e,options:t,create:s}){this.toasts[e]?(t.timeout&&t.timeout===this.toasts[e].timeout&&t.timeout++,this.setToast(Object.assign({},this.toasts[e],t))):s&&this.addToast(Object.assign({},{id:e},t))},getClasses(e){return[`${x}__container`,e].concat(this.defaults.containerClassName)}}});function Ss(e,t){const s=Y("Toast"),n=Y("VtTransition");return P(),E("div",null,[(P(!0),E(ve,null,Ee(e.positions,r=>(P(),E("div",{key:r},[St(n,{transition:e.defaults.transition,class:ee(e.getClasses(r))},{default:we(()=>[(P(!0),E(ve,null,Ee(e.getPositionToasts(r),i=>(P(),$(s,je({key:i.id},i),null,16))),128))]),_:2},1032,["transition","class"])]))),128))])}ht.render=Ss;var Cs=ht,He=(e={},t=!0)=>{const s=e.eventBus=e.eventBus||new Te;t&&Ge(()=>{const i=Je(Cs,Xe({},e)),a=i.mount(document.createElement("div")),h=e.onMounted;if(W(h)||h(a,i),e.shareAppContext){const p=e.shareAppContext;p===!0?console.warn(`[${x}] App to share context with was not provided.`):(i._context.components=p._context.components,i._context.directives=p._context.directives,i._context.mixins=p._context.mixins,i._context.provides=p._context.provides,i.config.globalProperties=p.config.globalProperties)}});const n=(i,a)=>{const h=Object.assign({},{id:Ft(),type:j.DEFAULT},a,{content:i});return s.emit(R.ADD,h),h.id};n.clear=()=>s.emit(R.CLEAR,void 0),n.updateDefaults=i=>{s.emit(R.UPDATE_DEFAULTS,i)},n.dismiss=i=>{s.emit(R.DISMISS,i)};function r(i,{content:a,options:h},p=!1){const f=Object.assign({},h,{content:a});s.emit(R.UPDATE,{id:i,options:f,create:p})}return n.update=r,n.success=(i,a)=>n(i,Object.assign({},a,{type:j.SUCCESS})),n.info=(i,a)=>n(i,Object.assign({},a,{type:j.INFO})),n.error=(i,a)=>n(i,Object.assign({},a,{type:j.ERROR})),n.warning=(i,a)=>n(i,Object.assign({},a,{type:j.WARNING})),n},Os=()=>{const e=()=>console.warn(`[${x}] This plugin does not support SSR!`);return new Proxy(e,{get(){return e}})};function ie(e){return Ut()?Vt(e)?He({eventBus:e},!1):He(e,!0):Os()}var Pe=Symbol("VueToastification"),De=new Te,Is=(e,t)=>{(t==null?void 0:t.shareAppContext)===!0&&(t.shareAppContext=e);const s=ie(Xe({eventBus:De},t));e.provide(Pe,s)},Es=e=>{const t=ie(e);We()&&Ct(Pe,t)},As=e=>{if(e)return ie(e);const t=We()?Ot(Pe,void 0):void 0;return t||ie(De)},ks=Is;const Ms=Object.freeze(Object.defineProperty({__proto__:null,EventBus:Te,get POSITION(){return ne},get TYPE(){return j},createToastInterface:ie,default:ks,globalEventBus:De,provideToast:Es,toastInjectionKey:Pe,useToast:As},Symbol.toStringTag,{value:"Module"}));const Ls={name:"BDKSimpleToast",props:{text:{type:String,required:!0},collapseLength:{type:Number,default:60}},setup(e){const t=oe(!0),s=Fe(()=>e.text.slice(0,e.collapseLength)),n=Fe(()=>e.text.length>e.collapseLength),r=()=>{t.value&&n.value?t.value=!1:closeToast()};return{isCollapsed:t,collapsedText:s,handleClick:()=>{n.value?r():closeToast()},shouldShowButton:n}}},js=e=>(Et("data-v-b34f46d6"),e=e(),At(),e),Rs={key:0,class:"toast-text-collapsed"},Ds=js(()=>z("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1.3em",viewBox:"0 0 512 512"},[z("path",{d:"M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z"})],-1)),zs=[Ds],Bs={key:1,class:"toast-text-expanded"};function xs(e,t,s,n,r,i){return P(),E("div",null,[n.isCollapsed?(P(),E("div",Rs,[ge(te(n.collapsedText)+" ",1),n.shouldShowButton?(P(),E("button",{key:0,onClick:t[0]||(t[0]=(...a)=>n.handleClick&&n.handleClick(...a))},zs)):le("",!0)])):(P(),E("div",Bs,te(s.text),1))])}const de=It(Ls,[["render",xs],["__scopeId","data-v-b34f46d6"]]),{useToast:Fs}=Ms,hn=(e,t)=>{const s=Fs();switch(t){case 0:s.error({component:de,props:{text:e}});break;case 2:s.info({component:de,props:{text:e}});break;case 3:s.warning({component:de,props:{text:e}});break;default:s.success({component:de,props:{text:e}})}};var V=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pn(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),s}var Se={},C={},X={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getUniqueId=e.mergeTransactions=e.LT_COLLATOR=e.Semaphore=e.DelayedTransactions=e.MessageExpiredException=e.AddressLiteral=e.isAddressObject=e.Address=void 0;class t{constructor(u){this.equals=v=>this._equals(v),this._address=u}toString(){return this._address}toJSON(){return this._address}_equals(u){return typeof u=="string"?this._address===u:this._address===(u==null?void 0:u._address)}}e.Address=t;function s(d){return d!=null&&(d instanceof t||Object.getPrototypeOf(d).constructor.name===t.prototype.constructor.name)}e.isAddressObject=s;class n extends t{constructor(u){super(u)}}e.AddressLiteral=n;class r extends Error{constructor(u,v){super("Message expired"),this.address=u,this.hash=v}}e.MessageExpiredException=r;class i{constructor(){this.transactions=new Map}async waitTransaction(u,v){var w;let M=(w=this.transactions.get(v))===null||w===void 0?void 0:w.promise;if(M==null){let m,o;M=new Promise((c,l)=>{m=b=>c(b),o=()=>l()}),this.transactions.set(v,{promise:M,resolve:m,reject:o})}const L=await M;if(L==null)throw new r(u,v);return L}fillTransaction(u,v){const w=this.transactions.get(u);w!=null?w.resolve(v):this.transactions.set(u,{promise:Promise.resolve(v),resolve:()=>{},reject:()=>{}})}}e.DelayedTransactions=i;class a{constructor(u){this.tasks=[],this.sched=()=>{var v;this.count>0&&this.tasks.length>0&&(this.count--,(v=this.tasks.shift())===null||v===void 0||v())},this.count=u}acquire(){return new Promise((u,v)=>{this.tasks.push(()=>{let w=!1;u(()=>{w||(w=!0,this.count++,this.sched())})}),p(this.sched)})}releaseAll(){for(var u;this.tasks.length>0;)(u=this.tasks.shift())===null||u===void 0||u()}}e.Semaphore=a;function h(d){const u=document.createTextNode("");let v,w,M=0,L=0;return new d(function(){let m;if(v)w&&(v=w.slice(L).concat(v));else{if(!w)return;v=w}if(w=v,v=null,L=0,typeof w=="function"){m=w,w=null,m();return}for(u.data=M=++M%2;L<w.length;)m=w[L],L++,L===w.length&&(w=null),m()}).observe(u,{characterData:!0}),function(m){if(v){typeof v=="function"?v=[v,m]:v.push(m);return}v=m,u.data=M=++M%2}}const p=function(){if(typeof queueMicrotask=="function")return queueMicrotask;if(typeof document=="object"&&document){if(typeof MutationObserver=="function")return h(MutationObserver);if(typeof window.WebKitMutationObserver=="function")return h(window.WebKitMutationObserver)}if(typeof setImmediate=="function")return setImmediate;if(typeof setTimeout=="function"||typeof setTimeout=="object")return function(d){setTimeout(d,0)};throw new Error("No `nextTick` implementation found")}();e.LT_COLLATOR=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function f(d,u,v){if(v.batchType==="old")return d.push(...u),d;if(d.length===0)return d.push(...u),d;let w=0;for(;w<d.length&&e.LT_COLLATOR.compare(d[w].id.lt,v.maxLt)>=0;)++w;return d.splice(w,0,...u),d}e.mergeTransactions=f;const g=4294967295;let y=Math.floor(Math.random()*g);function _(){return y=(y+1)%g,y}e.getUniqueId=_})(X);Object.defineProperty(C,"__esModule",{value:!0});C.parsePartialTokensObject=C.parseTokensObject=C.serializeTokensObject=C.parseAccountInteraction=C.parsePermissions=C.parseMessage=C.serializeMessage=C.parseTransaction=C.serializeTransaction=void 0;const re=X;function Ns(e){return{id:{hash:e.id.hash,lt:e.id.lt},prevTransactionId:e.prevTransactionId!=null?{hash:e.prevTransactionId.hash,lt:e.prevTransactionId.lt}:void 0,createdAt:e.createdAt,aborted:e.aborted,exitCode:e.exitCode,resultCode:e.resultCode,origStatus:e.origStatus,endStatus:e.endStatus,totalFees:e.totalFees,inMessage:ke(e.inMessage),outMessages:e.outMessages.map(ke)}}C.serializeTransaction=Ns;function qs(e){return{...e,inMessage:Me(e.inMessage),outMessages:e.outMessages.map(Me)}}C.parseTransaction=qs;function ke(e){return{hash:e.hash,src:e.src?e.src.toString():void 0,dst:e.dst?e.dst.toString():void 0,value:e.value,bounce:e.bounce,bounced:e.bounced,body:e.body,bodyHash:e.bodyHash}}C.serializeMessage=ke;function Me(e){return{...e,src:e.src?new re.Address(e.src):void 0,dst:e.dst?new re.Address(e.dst):void 0}}C.parseMessage=Me;function Us(e){return{...e,accountInteraction:e.accountInteraction?pt(e.accountInteraction):void 0}}C.parsePermissions=Us;function pt(e){return{...e,address:new re.Address(e.address)}}C.parseAccountInteraction=pt;function Vs(e){return Le(e)}C.serializeTokensObject=Vs;function Le(e){if(typeof e=="object"&&(0,re.isAddressObject)(e))return e.toString();if(Array.isArray(e)){const t=[];for(const s of e)t.push(Le(s));return t}else if(e!=null&&typeof e=="object"){const t={};for(const[s,n]of Object.entries(e))t[s]=Le(n);return t}else return e}function $s(e,t){const s={};for(const n of e)s[n.name]=K(n,t[n.name]);return s}C.parseTokensObject=$s;function Hs(e,t){const s={};for(const n of e)Object.prototype.hasOwnProperty.call(t,n.name)&&(s[n.name]=K(n,!t[n.name]));return s}C.parsePartialTokensObject=Hs;function K(e,t){if(e.type.startsWith("map")){const s=e.type.indexOf(","),n=e.type.slice(4,s),r=e.type.slice(s+1,-1),i=[];for(const[a,h]of t)i.push([K({name:"",type:n},a),K({name:"",type:r,components:e.components},h)]);return i}else{const s=e.type.endsWith("[]"),n=!s&&e.type.startsWith("optional"),r=s?e.type.slice(0,-2):n?e.type.slice(9,-1):e.type;if(s){const i={name:e.name,type:r,components:e.components},a=[];for(const h of t)a.push(K(i,h));return a}else if(n){if(t==null)return null;{const i={name:e.name,type:r,components:e.components};return K(i,t)}}else if(r==="tuple"){const i={};if(e.components!=null)for(const a of e.components)i[a.name]=K(a,t[a.name]);return i}else return r==="address"?new re.Address(t):t}}var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.Subscriber=void 0;const Z=X,Ks=C;class Ws{constructor(t){this.provider=t,this.subscriptions=new Map,this.scanners=new Map,this.unsubscribe=async()=>this._unsubscribe()}transactions(t){return this._addSubscription("transactionsFound",t,!1)}trace(t){const s=(0,Z.getUniqueId)();return new k((n,r)=>{const i=new Js(this.provider,{origin:t,onData:n,onEnd:a=>{this.scanners.delete(s),r(a)}});return this.scanners.set(s,i),i.start(),Promise.resolve()},async()=>{const n=this.scanners.get(s);n!=null&&(this.scanners.delete(s),await n.stop())},Oe,!0)}oldTransactions(t,s){const n=(0,Z.getUniqueId)();return new k((r,i)=>{const a=new Gs(this.provider,{address:t,onData:r,onEnd:h=>{this.scanners.delete(n),i(h)},...s});return this.scanners.set(n,a),a.start(),Promise.resolve()},async()=>{const r=this.scanners.get(n);r!=null&&(this.scanners.delete(n),await r.stop())},Oe,!0)}states(t){return this._addSubscription("contractStateChanged",t,!1)}async _unsubscribe(){const t=[];for(const s of this.subscriptions.values())for(const[n,r]of Object.entries(s))delete s[n],r!=null&&t.push(r.subscription.then(i=>i.unsubscribe()).catch(()=>{}));this.subscriptions.clear();for(const s of this.scanners.values())t.push(s.stop());this.scanners.clear(),await Promise.all(t)}_addSubscription(t,s,n){const r=s.toString(),i=h=>{const p=this.subscriptions.get(r);if(p==null)return;const f=p[t];if(f!=null){const g=f.handlers.get(h);if(g!=null){f.handlers.delete(h);const{queue:y,onEnd:_,state:d}=g;d.finished||(d.finished=!0,y.clear(),y.enqueue(async()=>_(d.eof)))}if(f.handlers.size===0){const y=f.subscription;delete p[t],y.then(_=>_.unsubscribe()).catch(console.debug)}}p.contractStateChanged==null&&p.transactionsFound==null&&this.subscriptions.delete(r)},a=(0,Z.getUniqueId)();return new k((h,p)=>{const f=this.subscriptions.get(r);let g=f==null?void 0:f[t];const y={eof:!1,finished:!1},_={onData:h,onEnd:p,queue:new ze,state:y};if(g!=null)return g.handlers.set(a,_),Promise.resolve();const d=new Map;d.set(a,_);const u=this.provider.subscribe(t,{address:s}).then(v=>(v.on("data",w=>{for(const{onData:M,queue:L,state:m}of d.values())m.eof||m.finished||L.enqueue(async()=>{await M(w)||(m.eof=!0,i(a))})}),v.on("unsubscribed",()=>{for(const w of d.keys())i(w)}),v)).catch(v=>{console.error(v);for(const w of d.keys())i(w);throw v});return g={subscription:u,handlers:d},f==null?this.subscriptions.set(r,{[t]:g}):f[t]=g,u.then(()=>{})},()=>i(a),Oe,n)}}ae.Subscriber=Ws;async function Oe(e,t){return t(e)}class k{constructor(t,s,n,r){this.makeProducer=t,this.stopProducer=s,this.extractor=n,this.isFinite=r,this.fold=this.onlyFinite((i,a,h)=>{let p=i;return new Promise((f,g)=>{const y=this.makeProducer(_=>this.extractor(_,async d=>(p=await a(p,d),!0)),_=>{_?f(p):g(new Error("Subscription closed"))});h!=null&&(h.subscribed=y)})}),this.finished=this.onlyFinite(i=>new Promise((a,h)=>{const p=this.makeProducer(f=>this.extractor(f,g=>!0),f=>{f?a(void 0):h(new Error("Subscription closed"))});i!=null&&(i.subscribed=p)}))}async delayed(t){const{subscribed:s,result:n}=t({first:()=>{const r={},i=this.first(r);return{subscribed:r.subscribed,result:i}},on:r=>{const i={};return this.on(r,i),{subscribed:i.subscribed,result:void 0}},fold:this.fold!=null?(r,i)=>{const a={},h=this.fold(r,i,a);return{subscribed:a.subscribed,result:h}}:void 0,finished:this.finished!=null?()=>{const r={},i=this.finished(r);return{subscribed:r.subscribed,result:i}}:void 0});return await s,()=>n}first(t){const s={found:!1};return new Promise((n,r)=>{const i=this.makeProducer(a=>this.extractor(a,h=>(Object.assign(s,{found:!0,result:h}),!1)),a=>{a?this.isFinite?n(s.found?s.result:void 0):s.found?n(s.result):r(new Error("Unexpected end of stream")):r(new Error("Subscription closed"))});t!=null&&(t.subscribed=i)})}on(t,s){const n=this.makeProducer(r=>this.extractor(r,async i=>(await t(i),!0)),r=>{});s!=null&&(s.subscribed=n)}merge(t){return new k((s,n)=>{const r={stopped:!1,counter:0},i=a=>{r.stopped||(++r.counter==2||!a)&&(r.stopped=!0,n(a))};return Promise.all([this.makeProducer(s,i),t.makeProducer(s,i)]).then(()=>{})},()=>{this.stopProducer(),t.stopProducer()},this.extractor,this.isFinite&&t.isFinite)}enumerate(){const t={index:0};return new k(this.makeProducer,this.stopProducer,(s,n)=>this.extractor(s,async r=>n({index:t.index++,item:r})),this.isFinite)}tap(t){return new k(this.makeProducer,this.stopProducer,(s,n)=>this.extractor(s,async r=>(await t(r),n(r))),this.isFinite)}filter(t){return new k(this.makeProducer,this.stopProducer,(s,n)=>this.extractor(s,async r=>await t(r)?n(r):!0),this.isFinite)}filterMap(t){return new k(this.makeProducer,this.stopProducer,(s,n)=>this.extractor(s,async r=>{const i=await t(r);return i!==void 0?n(i):!0}),this.isFinite)}map(t){return new k(this.makeProducer,this.stopProducer,(s,n)=>this.extractor(s,async r=>{const i=await t(r);return n(i)}),this.isFinite)}flatMap(t){return new k(this.makeProducer,this.stopProducer,(s,n)=>this.extractor(s,async r=>{const i=await t(r);for(const a of i)if(!await n(a))return!1;return!0}),this.isFinite)}skip(t){const s={index:0};return new k(this.makeProducer,this.stopProducer,(n,r)=>this.extractor(n,i=>s.index>=t?r(i):(++s.index,!0)),this.isFinite)}skipWhile(t){const s={shouldSkip:!0};return new k(this.makeProducer,this.stopProducer,(n,r)=>this.extractor(n,async i=>!s.shouldSkip||!await t(i)?(s.shouldSkip=!1,r(i)):!0),this.isFinite)}take(t){const s={index:0};return new k(this.makeProducer,this.stopProducer,(n,r)=>this.extractor(n,i=>s.index<t?(++s.index,r(i)):!1),!0)}takeWhile(t){return new k(this.makeProducer,this.stopProducer,(s,n)=>this.extractor(s,async r=>await t(r)?n(r):!1),!0)}takeWhileMap(t){return new k(this.makeProducer,this.stopProducer,(s,n)=>this.extractor(s,async r=>{const i=await t(r);return i!==void 0?n(i):!1}),!0)}onlyFinite(t){if(this.isFinite)return t}}class Gs{constructor(t,s){this.provider=t,this.params=s,this.queue=new ze,this.isRunning=!1}start(){this.isRunning||this.promise!=null||(this.isRunning=!0,this.promise=(async()=>{const t=this.params,s={complete:!1};for(;this.isRunning&&!s.complete;)try{const{transactions:n,continuation:r}=await this.provider.getTransactions({address:this.params.address,continuation:this.continuation});if(s.complete=!s.complete&&n.length==null,!this.isRunning||s.complete)break;const i=n.filter(h=>(t.fromLt==null||Z.LT_COLLATOR.compare(h.id.lt,t.fromLt)>0)&&(t.fromUtime==null||h.createdAt>t.fromUtime));if(i.length==0){s.complete=!0;break}const a={maxLt:i[0].id.lt,minLt:i[i.length-1].id.lt,batchType:"old"};if(this.queue.enqueue(async()=>{await this.params.onData({address:this.params.address,transactions:i,info:a})||(s.complete=!0,this.isRunning=!1)}),r!=null)this.continuation=r;else{s.complete=!0;break}}catch(n){console.error(n)}this.queue.enqueue(async()=>this.params.onEnd(s.complete)),this.isRunning=!1,this.continuation=void 0})())}async stop(){this.isRunning=!1,this.queue.clear(),this.promise!=null?await this.promise:this.params.onEnd(!1)}}class Js{constructor(t,s){this.provider=t,this.params=s,this.queue=new ze,this.isRunning=!1,this.semaphore=new Z.Semaphore(10)}start(){if(this.isRunning||this.promise!=null)return;const t=this.provider;this.isRunning=!0,this.promise=(async()=>{const s={complete:!1},n=i=>{const a={stopped:!1};return{promise:(async()=>{let f=500;for(;;){const g=await this.semaphore.acquire();if(a.stopped){g();return}const y=await t.rawApi.findTransaction({inMessageHash:i}).catch(()=>({transaction:void 0})).finally(()=>g());if(a.stopped)return;if(y.transaction!=null){const u=(0,Ks.parseTransaction)(y.transaction);return u.account=u.inMessage.dst,u}let _;const d=new Promise((u,v)=>{_=()=>u(),a.reject=()=>v()});if(a.timeout=setTimeout(_,f),await d,a.stopped)return;a.reject=void 0,f=Math.min(f*2,3e3)}})(),reject:()=>{var f;a.stopped=!0,(f=a.reject)===null||f===void 0||f.call(a),a.timeout!=null&&clearTimeout(a.timeout)}}},r=[this.params.origin];try{e:for(;this.isRunning;){const i=r.shift();if(i==null){s.complete=!0;break}const a=i.outMessages.filter(h=>h.dst!=null).map(h=>{const p=h.hash;return n(p)});this.pendingTransactions=a;for(const{promise:h}of a){const p=await h;if(!this.isRunning||s.complete||p==null)break e;this.queue.enqueue(async()=>{await this.params.onData(p)||(s.complete=!0,this.isRunning=!1,this.rejectPendingTransactions())}),r.push(p)}this.pendingTransactions=void 0}}catch(i){console.error(i)}finally{this.queue.enqueue(async()=>this.params.onEnd(s.complete)),this.isRunning=!1,this.rejectPendingTransactions()}})()}async stop(){this.isRunning=!1,this.queue.clear(),this.rejectPendingTransactions(),this.promise!=null?await this.promise:this.params.onEnd(!1)}rejectPendingTransactions(){if(this.pendingTransactions!=null){for(const t of this.pendingTransactions)t.reject();this.pendingTransactions=void 0}this.semaphore.releaseAll()}}class ze{constructor(){this.queue=[],this.workingOnPromise=!1}enqueue(t){this.queue.push(t),this._dequeue().catch(()=>{})}clear(){this.queue.length=0}async _dequeue(){if(this.workingOnPromise)return;const t=this.queue.shift();t&&(this.workingOnPromise=!0,t().then(()=>{this.workingOnPromise=!1,this._dequeue()}).catch(()=>{this.workingOnPromise=!1,this._dequeue()}))}}var G={};Object.defineProperty(G,"__esModule",{value:!0});G.TvmException=G.Contract=void 0;const J=X,O=C;class Xs{constructor(t,s,n){if(!Array.isArray(s.functions))throw new Error("Invalid abi. Functions array required");if(!Array.isArray(s.events))throw new Error("Invalid abi. Events array required");this._provider=t,this._abi=JSON.stringify(s),this.methodsAbi=s.functions.reduce((r,i)=>(i.inputs==null&&(i.inputs=[]),i.outputs==null&&(i.outputs=[]),r[i.name]=i,r),{}),this.eventsAbi=s.events.reduce((r,i)=>(i.inputs==null&&(i.inputs=[]),r[i.name]=i,r),{}),this.fieldsAbi=s.fields,this._address=n,this._methods=new Proxy({},{get:(r,i)=>{const a=this.methodsAbi[i];return(h={})=>new Qs(this._provider,a,this._abi,this._address,i,h)}}),this._fields=new Proxy({},{get:(r,i)=>async(a={})=>{await this._provider.ensureInitialized();const{fields:h,state:p}=await this._provider.rawApi.getContractFields({address:this._address.toString(),abi:this._abi,cachedState:a==null?void 0:a.cachedState,allowPartial:(a==null?void 0:a.allowPartial)==null?!1:a.allowPartial});if(h==null)throw p==null?new Error("Account does not exist"):p.isDeployed?new Error("Invalid account data"):new Error("Account is not deployed");const f=(0,O.parseTokensObject)(this.fieldsAbi,h);if(f==null||!Object.prototype.hasOwnProperty.call(f,i))throw new Error("Unknown field");return f[i]}})}get methods(){return this._methods}get fields(){return this._fields}get address(){return this._address}get abi(){return this._abi}async getFullState(){return await this._provider.ensureInitialized(),await this._provider.rawApi.getFullContractState({address:this.address.toString()})}async getFields(t={}){await this._provider.ensureInitialized();const{fields:s,state:n}=await this._provider.rawApi.getContractFields({address:this.address.toString(),abi:this._abi,cachedState:t.cachedState,allowPartial:t.allowPartial==null?!1:t.allowPartial});return{fields:s!=null?(0,O.parseTokensObject)(this.fieldsAbi,s):void 0,state:n}}transactions(t){return t.transactions(this._address).flatMap(({transactions:s})=>s)}events(t){return t.transactions(this._address).flatMap(({transactions:s})=>s).flatMap(s=>this.decodeTransactionEvents({transaction:s}).then(n=>(n.forEach(r=>r.transaction=s),n)))}async waitForEvent(t={}){const{range:s,filter:n}=t,r=typeof n=="string"?({event:p})=>p===n:n;let i=t.subscriber;const a=i==null;i==null&&(i=new this._provider.Subscriber);const h=await((s==null?void 0:s.fromLt)!=null||(s==null?void 0:s.fromUtime)!=null?i.oldTransactions(this._address,s).merge(i.transactions(this._address)):i.transactions(this.address)).flatMap(p=>p.transactions).takeWhile(p=>s==null||(s.fromLt==null||J.LT_COLLATOR.compare(p.id.lt,s.fromLt)>0)&&(s.fromUtime==null||p.createdAt>s.fromUtime)&&(s.toLt==null||J.LT_COLLATOR.compare(p.id.lt,s.toLt)<0)&&(s.toUtime==null||p.createdAt<s.toUtime)).flatMap(p=>this.decodeTransactionEvents({transaction:p}).then(f=>(f.forEach(g=>g.transaction=p),f))).filterMap(async p=>{if(r==null||await r(p))return p}).first();return a&&await i.unsubscribe(),h}async getPastEvents(t){const{range:s,filter:n,limit:r}=t,i=typeof n=="string"?({event:p})=>p===n:n,a=[];let h=t==null?void 0:t.continuation;e:for(;;){const{transactions:p,continuation:f}=await this._provider.getTransactions({address:this._address,continuation:h});if(p.length===null)break;const g=p.filter(y=>((s==null?void 0:s.fromLt)==null||J.LT_COLLATOR.compare(y.id.lt,s.fromLt)>0)&&((s==null?void 0:s.fromUtime)==null||y.createdAt>s.fromUtime)&&((s==null?void 0:s.toLt)==null||J.LT_COLLATOR.compare(y.id.lt,s.toLt)<0)&&((s==null?void 0:s.toUtime)==null||y.createdAt<s.toUtime));if(g.length>0){const y=await Promise.all(g.map(async _=>({tx:_,events:await this.decodeTransactionEvents({transaction:_}).then(d=>(d.forEach(u=>u.transaction=_),d))})));for(let{tx:_,events:d}of y){i!=null&&(d=await Promise.all(d.map(async u=>await i(u)?u:void 0)).then(u=>u.filter(v=>v!=null))),h=_.id;for(const u of d){if(r!=null&&a.length>=r)break e;a.push(u)}if(r!=null&&a.length>=r)break e}}if(h=f,h==null)break}return{events:a,continuation:h}}async decodeTransaction(t){await this._provider.ensureInitialized();try{const s=await this._provider.rawApi.decodeTransaction({transaction:(0,O.serializeTransaction)(t.transaction),abi:this._abi,method:t.methods});if(s==null)return;const{method:n,input:r,output:i}=s,a=this.methodsAbi[n];return{method:n,input:a.inputs!=null?(0,O.parseTokensObject)(a.inputs,r):{},output:a.outputs!=null?(0,O.parseTokensObject)(a.outputs,i):{}}}catch{return}}async decodeTransactionEvents(t){await this._provider.ensureInitialized();try{const{events:s}=await this._provider.rawApi.decodeTransactionEvents({transaction:(0,O.serializeTransaction)(t.transaction),abi:this._abi}),n=[];for(const{event:r,data:i}of s){const a=this.eventsAbi[r];n.push({event:r,data:a.inputs!=null?(0,O.parseTokensObject)(a.inputs,i):{}})}return n}catch{return[]}}async decodeInputMessage(t){await this._provider.ensureInitialized();try{const s=await this._provider.rawApi.decodeInput({abi:this._abi,body:t.body,internal:t.internal,method:t.methods});if(s==null)return;const{method:n,input:r}=s,i=this.methodsAbi[n];return{method:n,input:i.inputs!=null?(0,O.parseTokensObject)(i.inputs,r):{}}}catch{return}}async decodeOutputMessage(t){await this._provider.ensureInitialized();try{const s=await this._provider.rawApi.decodeOutput({abi:this._abi,body:t.body,method:t.methods});if(s==null)return;const{method:n,output:r}=s,i=this.methodsAbi[n];return{method:n,output:i.outputs!=null?(0,O.parseTokensObject)(i.outputs,r):{}}}catch{return}}async decodeEvent(t){await this._provider.ensureInitialized();try{const s=await this._provider.rawApi.decodeEvent({abi:this.abi,body:t.body,event:t.events});if(s==null)return;const{event:n,data:r}=s,i=this.eventsAbi[n];return{event:n,data:i.inputs!=null?(0,O.parseTokensObject)(i.inputs,r):{}}}catch{return}}}G.Contract=Xs;class ft extends Error{constructor(t){super(`TvmException: ${t}`),this.code=t}}G.TvmException=ft;class Qs{constructor(t,s,n,r,i,a){this.provider=t,this.functionAbi=s,this.abi=n,this.address=r,this.method=i,this.params=(0,O.serializeTokensObject)(a)}async send(t){await this.provider.ensureInitialized();const{transaction:s}=await this.provider.rawApi.sendMessage({sender:t.from.toString(),recipient:this.address.toString(),amount:t.amount,bounce:t.bounce==null?!0:t.bounce,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:t.stateInit});return(0,O.parseTransaction)(s)}async sendDelayed(t){await this.provider.ensureInitialized();const s=new J.DelayedTransactions,n=await this.provider.subscribe("messageStatusUpdated");n.on("data",a=>{a.address.equals(t.from)&&s.fillTransaction(a.hash,a.transaction)});const{message:r}=await this.provider.rawApi.sendMessageDelayed({sender:t.from.toString(),recipient:this.address.toString(),amount:t.amount,bounce:t.bounce==null?!0:t.bounce,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:t.stateInit}).catch(a=>{throw n.unsubscribe().catch(console.error),a}),i=s.waitTransaction(this.address,r.hash).finally(()=>n.unsubscribe().catch(console.error));return{messageHash:r.hash,expireAt:r.expireAt,transaction:i}}async sendWithResult(t){await this.provider.ensureInitialized();let s=t.subscriber;const n=s==null;s==null&&(s=new this.provider.Subscriber);try{let r,i;const a=new Promise(d=>{i=u=>d(u)}),h=[];s.transactions(this.address).flatMap(d=>d.transactions).filter(d=>{var u;return((u=d.inMessage.src)===null||u===void 0?void 0:u.equals(t.from))||!1}).on(d=>{r==null?h.push(d):r.possibleMessages.findIndex(u=>u.hash==d.inMessage.hash)>=0&&(i==null||i(d))});const p=await this.send(t),f=p.outMessages.filter(d=>{var u;return((u=d.dst)===null||u===void 0?void 0:u.equals(this.address))||!1});r={transaction:p,possibleMessages:f};const g=h.find(d=>f.findIndex(u=>u.hash==d.inMessage.hash)>=0);g!=null&&(i==null||i(g));const y=await a;let _;try{const d=await this.provider.rawApi.decodeTransaction({transaction:(0,O.serializeTransaction)(y),abi:this.abi,method:this.method});d!=null&&(_=this.functionAbi.outputs!=null?(0,O.parseTokensObject)(this.functionAbi.outputs,d.output):{})}catch(d){console.error(d)}return{parentTransaction:r.transaction,childTransaction:y,output:_}}finally{n&&await s.unsubscribe()}}async estimateFees(t){await this.provider.ensureInitialized();const{fees:s}=await this.provider.rawApi.estimateFees({sender:t.from.toString(),recipient:this.address.toString(),amount:t.amount,payload:{abi:this.abi,method:this.method,params:this.params},stateInit:t.stateInit});return s}async sendExternal(t){await this.provider.ensureInitialized();const s=t.withoutSignature===!0?this.provider.rawApi.sendUnsignedExternalMessage:this.provider.rawApi.sendExternalMessage,{transaction:n,output:r}=await s({publicKey:t.publicKey,recipient:this.address.toString(),stateInit:t.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},local:t.local,executorParams:t.executorParams?{disableSignatureCheck:t.executorParams.disableSignatureCheck,overrideBalance:t.executorParams.overrideBalance}:void 0});return{transaction:(0,O.parseTransaction)(n),output:r!=null?(0,O.parseTokensObject)(this.functionAbi.outputs,r):void 0}}async sendExternalDelayed(t){await this.provider.ensureInitialized();const s=new J.DelayedTransactions,n=await this.provider.subscribe("messageStatusUpdated");n.on("data",a=>{a.address.equals(this.address)&&s.fillTransaction(a.hash,a.transaction)});const{message:r}=await this.provider.rawApi.sendExternalMessageDelayed({publicKey:t.publicKey,recipient:this.address.toString(),stateInit:t.stateInit,payload:{abi:this.abi,method:this.method,params:this.params}}).catch(a=>{throw n.unsubscribe().catch(console.error),a}),i=s.waitTransaction(this.address,r.hash).finally(()=>n.unsubscribe().catch(console.error));return{messageHash:r.hash,expireAt:r.expireAt,transaction:i}}async call(t={}){await this.provider.ensureInitialized();const{output:s,code:n}=await this.provider.rawApi.runLocal({address:this.address.toString(),cachedState:t.cachedState,responsible:t.responsible,functionCall:{abi:this.abi,method:this.method,params:this.params}});if(s==null||n!=0)throw new ft(n);return(0,O.parseTokensObject)(this.functionAbi.outputs,s)}async executeExternal(t){await this.provider.ensureInitialized();const{transaction:s,newState:n,output:r}=await this.provider.rawApi.executeLocal({address:this.address.toString(),cachedState:t.cachedState,stateInit:t.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},messageHeader:{type:"external",publicKey:t.publicKey,withoutSignature:t.withoutSignature},executorParams:t.executorParams!=null?{disableSignatureCheck:t.executorParams.disableSignatureCheck,overrideBalance:t.executorParams.overrideBalance}:void 0});return{transaction:(0,O.parseTransaction)(s),newState:n,output:r!==void 0?(0,O.parseTokensObject)(this.functionAbi.outputs,r):void 0}}async executeInternal(t){await this.provider.ensureInitialized();const{transaction:s,newState:n,output:r}=await this.provider.rawApi.executeLocal({address:this.address.toString(),cachedState:t.cachedState,stateInit:t.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},messageHeader:{type:"internal",sender:t.sender.toString(),amount:t.amount,bounce:t.bounce!=null?t.bounce:!1,bounced:t.bounced},executorParams:t.executorParams!=null?{disableSignatureCheck:t.executorParams.disableSignatureCheck,overrideBalance:t.executorParams.overrideBalance}:void 0});return{transaction:(0,O.parseTransaction)(s),newState:n,output:r!==void 0?(0,O.parseTokensObject)(this.functionAbi.outputs,r):void 0}}async encodeInternal(){await this.provider.ensureInitialized();const{boc:t}=await this.provider.rawApi.encodeInternalInput({abi:this.abi,method:this.method,params:this.params});return t}}var vt={};Object.defineProperty(vt,"__esModule",{value:!0});(function(e){var t=V&&V.__createBinding||(Object.create?function(m,o,c,l){l===void 0&&(l=c);var b=Object.getOwnPropertyDescriptor(o,c);(!b||("get"in b?!o.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return o[c]}}),Object.defineProperty(m,l,b)}:function(m,o,c,l){l===void 0&&(l=c),m[l]=o[c]}),s=V&&V.__setModuleDefault||(Object.create?function(m,o){Object.defineProperty(m,"default",{enumerable:!0,value:o})}:function(m,o){m.default=o}),n=V&&V.__importStar||function(m){if(m&&m.__esModule)return m;var o={};if(m!=null)for(var c in m)c!=="default"&&Object.prototype.hasOwnProperty.call(m,c)&&t(o,m,c);return s(o,m),o},r=V&&V.__exportStar||function(m,o){for(var c in m)c!=="default"&&!Object.prototype.hasOwnProperty.call(o,c)&&t(o,m,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.ProviderNotInitializedException=e.ProviderNotFoundException=e.ProviderRpcClient=e.hasEverscaleProvider=e.LT_COLLATOR=e.isAddressObject=e.mergeTransactions=e.MessageExpiredException=e.AddressLiteral=e.Address=e.Subscriber=void 0;const i=C,a=X,h=n(ae),p=n(G);r(vt,e),r(C,e),r(G,e);var f=ae;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return f.Subscriber}});var g=X;Object.defineProperty(e,"Address",{enumerable:!0,get:function(){return g.Address}}),Object.defineProperty(e,"AddressLiteral",{enumerable:!0,get:function(){return g.AddressLiteral}}),Object.defineProperty(e,"MessageExpiredException",{enumerable:!0,get:function(){return g.MessageExpiredException}}),Object.defineProperty(e,"mergeTransactions",{enumerable:!0,get:function(){return g.mergeTransactions}}),Object.defineProperty(e,"isAddressObject",{enumerable:!0,get:function(){return g.isAddressObject}}),Object.defineProperty(e,"LT_COLLATOR",{enumerable:!0,get:function(){return g.LT_COLLATOR}});const y=typeof window<"u"&&typeof window.document<"u";let _;!y||document.readyState==="complete"?_=Promise.resolve():_=new Promise(m=>{window.addEventListener("load",()=>{m()})});const d=()=>y?window.__ever||window.ton:void 0;async function u(){return y?(await _,window.__hasEverscaleProvider===!0||window.hasTonProvider===!0):!1}e.hasEverscaleProvider=u;class v{constructor(o={}){this._subscriptions={connected:new Map,disconnected:new Map,transactionsFound:new Map,contractStateChanged:new Map,messageStatusUpdated:new Map,networkChanged:new Map,permissionsChanged:new Map,loggedOut:new Map},this._contractSubscriptions=new Map,this._properties=o;const c=this;class l extends p.Contract{constructor(T,I){super(c,T,I)}}this.Contract=l;class b extends h.Subscriber{constructor(){super(c)}}this.Subscriber=b,this._api=new Proxy({},{get:(S,T)=>I=>{if(this._provider!=null)return this._provider.request({method:T,params:I});throw new M}}),o.forceUseFallback===!0?this._initializationPromise=o.fallback!=null?o.fallback().then(S=>{this._provider=S}):Promise.resolve():(this._provider=d(),this._provider!=null?this._initializationPromise=Promise.resolve():this._initializationPromise=u().then(S=>new Promise(T=>{if(!S)return T();if(this._provider=d(),this._provider!=null)T();else{const I=window.__hasEverscaleProvider===!0?"ever#initialized":"ton#initialized";window.addEventListener(I,A=>{this._provider=d(),T()})}})).then(async()=>{this._provider==null&&o.fallback!=null&&(this._provider=await o.fallback())})),this._initializationPromise.then(()=>{this._provider!=null&&this._registerEventHandlers(this._provider)})}async hasProvider(){return this._properties.fallback!=null?!0:u()}async ensureInitialized(){if(await this._initializationPromise,this._provider==null)throw new w}get isInitialized(){return this._provider!=null}get raw(){if(this._provider!=null)return this._provider;throw new M}get rawApi(){return this._api}createContract(o,c){return new this.Contract(o,c)}createSubscriber(){return new this.Subscriber}async requestPermissions(o){await this.ensureInitialized();const c=await this._api.requestPermissions({permissions:o.permissions});return(0,i.parsePermissions)(c)}async changeAccount(){await this.ensureInitialized(),await this._api.changeAccount()}async disconnect(){await this.ensureInitialized(),await this._api.disconnect()}async subscribe(o,c){class l{constructor(I,A){this._subscribe=I,this._unsubscribe=A,this._listeners={data:[],subscribed:[],unsubscribed:[]},this._subscribed=!1,this.subscribe=async()=>{if(!this._subscribed){this._subscribed=!0,await this._subscribe(this);for(const D of this._listeners.subscribed)D()}},this.unsubscribe=async()=>{if(this._subscribed){this._subscribed=!1,await this._unsubscribe();for(const D of this._listeners.unsubscribed)D()}}}on(I,A){return this._listeners[I].push(A),this}notify(I){for(const A of this._listeners.data)A(I)}}const b=this._subscriptions[o],S=(0,a.getUniqueId)();switch(o){case"connected":case"disconnected":case"messageStatusUpdated":case"networkChanged":case"permissionsChanged":case"loggedOut":{const T=new l(async I=>{b.has(S)||b.set(S,A=>{I.notify(A)})},async()=>{b.delete(S)});return await T.subscribe(),T}case"transactionsFound":case"contractStateChanged":{if(c==null)throw new Error("Address must be specified for the subscription");await this.ensureInitialized();const T=c.address.toString(),I=new l(async A=>{if(b.has(S))return;b.set(S,ue=>{ue.address.toString()===T&&A.notify(ue)});let D=this._contractSubscriptions.get(T);D==null&&(D=new Map,this._contractSubscriptions.set(T,D));const Q={state:o==="contractStateChanged",transactions:o==="transactionsFound"};D.set(S,Q);const{total:q,withoutExcluded:xe}=L(D.values(),Q);try{(q.transactions!==xe.transactions||q.state!==xe.state)&&await this.rawApi.subscribe({address:T,subscriptions:q})}catch(ue){throw b.delete(S),D.delete(S),ue}},async()=>{b.delete(S);const A=this._contractSubscriptions.get(T);if(A==null)return;const D=A.get(S),{total:Q,withoutExcluded:q}=L(A.values(),D);A.delete(S),!q.transactions&&!q.state?await this.rawApi.unsubscribe({address:T}):(Q.transactions!==q.transactions||Q.state!==q.state)&&await this.rawApi.subscribe({address:T,subscriptions:q})});return await I.subscribe(),I}default:throw new Error(`Unknown event ${o}`)}}async getProviderState(){await this.ensureInitialized();const o=await this._api.getProviderState();return{...o,permissions:(0,i.parsePermissions)(o.permissions)}}async getBalance(o){const{state:c}=await this.getFullContractState({address:o});return c==null?"0":c==null?void 0:c.balance}async getFullContractState(o){return await this.ensureInitialized(),await this._api.getFullContractState({address:o.address.toString()})}async getAccountsByCodeHash(o){await this.ensureInitialized();const{accounts:c,continuation:l}=await this._api.getAccountsByCodeHash({...o});return{accounts:c.map(b=>new a.Address(b)),continuation:l}}async getTransactions(o){await this.ensureInitialized();const{transactions:c,continuation:l,info:b}=await this._api.getTransactions({...o,address:o.address.toString()});return{transactions:c.map(i.parseTransaction),continuation:l,info:b}}async getTransaction(o){await this.ensureInitialized();const{transaction:c}=await this._api.getTransaction({...o});return{transaction:c?(0,i.parseTransaction)(c):void 0}}async getExpectedAddress(o,c){const{address:l}=await this.getStateInit(o,c);return l}async getStateInit(o,c){await this.ensureInitialized();const{address:l,stateInit:b,hash:S}=await this._api.getExpectedAddress({abi:JSON.stringify(o),...c,initParams:(0,i.serializeTokensObject)(c.initParams)});return{address:new a.Address(l),stateInit:b,hash:S}}async unpackInitData(o,c){await this.ensureInitialized();const{publicKey:l,initParams:b}=await this._api.unpackInitData({abi:JSON.stringify(o),data:c});return{publicKey:l,initParams:(0,i.parsePartialTokensObject)(o.data,b)}}async getBocHash(o){return await this.ensureInitialized(),await this._api.getBocHash({boc:o}).then(({hash:c})=>c)}async packIntoCell(o){return await this.ensureInitialized(),await this._api.packIntoCell({abiVersion:o.abiVersion,structure:o.structure,data:(0,i.serializeTokensObject)(o.data)})}async unpackFromCell(o){await this.ensureInitialized();const{data:c}=await this._api.unpackFromCell({...o,structure:o.structure});return{data:(0,i.parseTokensObject)(o.structure,c)}}async extractPublicKey(o){await this.ensureInitialized();const{publicKey:c}=await this._api.extractPublicKey({boc:o});return c}async codeToTvc(o){await this.ensureInitialized();const{tvc:c}=await this._api.codeToTvc({code:o});return c}async mergeTvc(o){return await this.ensureInitialized(),await this._api.mergeTvc(o)}async splitTvc(o){return await this.ensureInitialized(),await this._api.splitTvc({tvc:o})}async setCodeSalt(o){let c;if(typeof o.salt=="string")await this.ensureInitialized(),c=o.salt;else{const{boc:l}=await this.packIntoCell(o.salt);c=l}return await this._api.setCodeSalt({code:o.code,salt:c})}async getCodeSalt(o){await this.ensureInitialized();const{salt:c}=await this.rawApi.getCodeSalt({code:o.code});return c}async addAsset(o){await this.ensureInitialized();let c;switch(o.type){case"tip3_token":{c={rootContract:o.params.rootContract.toString()};break}default:throw new Error("Unknown asset type")}return await this._api.addAsset({account:o.account.toString(),type:o.type,params:c})}async verifySignature(o){return await this.ensureInitialized(),await this._api.verifySignature(o)}async signData(o){return await this.ensureInitialized(),await this._api.signData(o)}async signDataRaw(o){return await this.ensureInitialized(),await this._api.signDataRaw(o)}async encryptData(o){await this.ensureInitialized();const{encryptedData:c}=await this._api.encryptData(o);return c}async decryptData(o){await this.ensureInitialized();const{data:c}=await this._api.decryptData({encryptedData:o});return c}async sendMessage(o){await this.ensureInitialized();const{transaction:c}=await this._api.sendMessage({sender:o.sender.toString(),recipient:o.recipient.toString(),amount:o.amount,bounce:o.bounce,payload:o.payload?{abi:o.payload.abi,method:o.payload.method,params:(0,i.serializeTokensObject)(o.payload.params)}:void 0,stateInit:o.stateInit});return{transaction:(0,i.parseTransaction)(c)}}async sendMessageDelayed(o){await this.ensureInitialized();const c=new a.DelayedTransactions,l=await this.subscribe("messageStatusUpdated");l.on("data",T=>{T.address.equals(o.sender)&&c.fillTransaction(T.hash,T.transaction)});const{message:b}=await this._api.sendMessageDelayed({sender:o.sender.toString(),recipient:o.recipient.toString(),amount:o.amount,bounce:o.bounce,payload:o.payload?{abi:o.payload.abi,method:o.payload.method,params:(0,i.serializeTokensObject)(o.payload.params)}:void 0,stateInit:o.stateInit}).catch(T=>{throw l.unsubscribe().catch(console.error),T}),S=c.waitTransaction(o.sender,b.hash).finally(()=>l.unsubscribe().catch(console.error));return{messageHash:b.hash,expireAt:b.expireAt,transaction:S}}_registerEventHandlers(o){const c={connected:l=>l,disconnected:l=>l,transactionsFound:l=>({address:new a.Address(l.address),transactions:l.transactions.map(i.parseTransaction),info:l.info}),contractStateChanged:l=>({address:new a.Address(l.address),state:l.state}),messageStatusUpdated:l=>({address:new a.Address(l.address),hash:l.hash,transaction:l.transaction!=null?(0,i.parseTransaction)(l.transaction):void 0}),networkChanged:l=>l,permissionsChanged:l=>({permissions:(0,i.parsePermissions)(l.permissions)}),loggedOut:l=>l};for(const[l,b]of Object.entries(c))o.addListener(l,S=>{const T=this._subscriptions[l],I=b(S);for(const A of T.values())A(I)})}}e.ProviderRpcClient=v;class w extends Error{constructor(){super("Everscale provider was not found")}}e.ProviderNotFoundException=w;class M extends Error{constructor(){super("Everscale provider was not initialized yet")}}e.ProviderNotInitializedException=M;function L(m,o){const c={state:!1,transactions:!1},l=Object.assign({},c);for(const b of m){if(l.transactions&&l.state)break;c.state||(c.state=b.state),c.transactions||(c.transactions=b.transactions),b!==o&&(l.state||(l.state=b.state),l.transactions||(l.transactions=b.transactions))}return{total:c,withoutExcluded:l}}})(Se);const Ys={class:"modal is-active"},Zs=z("div",{class:"modal-background"},null,-1),en={class:"modal-content select-provider-modal"},tn={class:"box"},sn=z("p",{class:"modal-title"},"Connect a wallet",-1),nn={class:"buttons"},rn=["onClick"],an=H({__name:"ProviderSelector",props:{providers:{},onSelect:{type:Function}},setup(e){return(t,s)=>(P(),E("div",Ys,[Zs,z("div",en,[z("div",tn,[sn,z("div",nn,[(P(!0),E(ve,null,Ee(t.providers,(n,r)=>(P(),E("button",{class:"button is-fullwidth provider-button",key:r,onClick:i=>t.onSelect(n.object)},te(n.title),9,rn))),128))])])])]))}});let pe;typeof document<"u"&&typeof window<"u"?document.readyState==="complete"?pe=Promise.resolve():pe=new Promise(e=>{window.addEventListener("load",()=>{e()})}):pe=Promise.resolve();class on{async request(t){if(this.inner==null)throw new Se.ProviderNotInitializedException;return this.inner.request(t)}addListener(t,s){var n;return(n=this.inner)==null||n.addListener(t,s),this}removeListener(t,s){var n;return(n=this.inner)==null||n.removeListener(t,s),this}on(t,s){var n;return(n=this.inner)==null||n.on(t,s),this}once(t,s){var n;return(n=this.inner)==null||n.once(t,s),this}prependListener(t,s){var n;return(n=this.inner)==null||n.prependListener(t,s),this}prependOnceListener(t,s){var n;return(n=this.inner)==null||n.prependOnceListener(t,s),this}}class cn{constructor(t){this.params=t,this.provider=new on}asProviderFallback(){return()=>(this.providerPromise||(this.providerPromise=new Promise(t=>{this.providerResolve=t;const s=Ie();if(s){const n=this.getProviderByKey(s);n&&(this.provider.inner=n,this.providerResolve(n),this.providerResolve=void 0)}})),this.providerPromise)}initiateConnection(){if(this.providerResolve){const t=Ie();if(t){const n=this.getProviderByKey(t);if(n){this.provider.inner=n,this.providerResolve(n),this.providerResolve=void 0;return}}const s=async n=>{this.provider.inner=n,this.providerResolve(n),this.providerResolve=void 0;const r=this.getKeyByProvider(n);r&&this.setCookie("savedProviderKey",r,7)};this.selectProvider(s)||pe.then(()=>{if(!this.selectProvider(s))for(const{injected:n}of this.params.supportedWallets)typeof n.flag<"u"&&typeof n.event<"u"&&window[n.flag]===!0&&window.addEventListener(n.event,r=>{this.selectProvider(s)})})}}getProviderByKey(t){const s=this.params.supportedWallets.find(n=>n.title===t);if(s)return window[s.injected.object]}getKeyByProvider(t){const s=this.params.supportedWallets.find(n=>window[n.injected.object]===t);if(s)return s.title}selectProvider(t){const s=Ie();if(s){const a=this.getProviderByKey(s);if(a)return this.provider.inner=a,!0}const n=this.getProviders();if(n.length===0)return!1;if(n.length===1)return t(n[0].provider),!0;const r=oe(null),i=Je({setup(){return()=>Lt(an,{providers:n.map(({provider:a,wallet:h})=>({title:h.title,object:a})),onSelect:a=>{r.value&&r.value.remove(),t(a)}})}});return Ge(()=>{if(typeof document>"u")return;document.getElementById("app")&&(r.value=document.createElement("div"),document.body.appendChild(r.value),i.mount(r.value))}),!0}getProviders(){const t=new Array;if(typeof window>"u")return t;for(const s of this.params.supportedWallets){const n=s.injected.object,r=window[n];r!=null&&t.push({provider:r,wallet:s})}return t}setCookie(t,s,n){if(typeof document>"u")return;let r="";if(n){let i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3),r="; expires="+i.toUTCString()}document.cookie=t+"="+(s||"")+r+"; path=/"}deleteCookie(t){typeof document>"u"||(document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")}disconnectProvider(){this.provider.inner=void 0,this.providerPromise=void 0,this.deleteCookie("savedProviderKey")}}const me=new cn({supportedWallets:[{title:"EVER Wallet",injected:{object:"__ever",event:"ever#initialized"}},{title:"VENOM Wallet",injected:{object:"__venom"}}]}),Ie=(e="savedProviderKey")=>{if(typeof document>"u")return null;let t=e+"=",s=document.cookie.split(";");for(let n=0;n<s.length;n++){let r=s[n];for(;r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(t)==0)return r.substring(t.length,r.length)}return null},F=new Se.ProviderRpcClient({forceUseFallback:!0,fallback:me.asProviderFallback()}),mt=async()=>{me.initiateConnection(),await new Se.ProviderRpcClient({forceUseFallback:!0,fallback:me.asProviderFallback()}).requestPermissions({permissions:["basic","accountInteraction"]})},un=async()=>{await F.changeAccount()},dn=async()=>{await F.disconnect(),me.disconnectProvider(),location.reload()},bt=oe(!1),Be=kt(),fe=oe(),be=oe();F.hasProvider().then(async e=>{if(!e)return;bt.value=!0,await F.ensureInitialized(),(await F.subscribe("permissionsChanged")).on("data",s=>{Be.value=s.permissions.accountInteraction}),(await F.subscribe("networkChanged")).on("data",s=>{be.value=s.networkId.toString()});const t=await F.getProviderState();be.value=t.networkId.toString(),t.permissions.accountInteraction!=null&&await mt()});Mt([Be,be],async([e],t,s)=>{const n=e==null?void 0:e.address;if(n==null)return;fe.value=void 0;const{state:r}=await F.getFullContractState({address:n});if((e==null?void 0:e.address)!=n)return;fe.value=r==null?void 0:r.balance;const i=await F.subscribe("contractStateChanged",{address:n});s(()=>i.unsubscribe().catch(console.error)),i.on("data",a=>{a.address.equals(e==null?void 0:e.address)&&(fe.value=a.state.balance)})},{immediate:!0});function fn(){return{provider:F,hasProvider:bt,selectedAccount:Be,selectedAccountBalance:fe,selectedNetwork:be,connectToWallet:mt,changeAccount:un,disconnect:dn}}export{de as B,Se as d,pn as g,ks as s,hn as t,fn as u};
