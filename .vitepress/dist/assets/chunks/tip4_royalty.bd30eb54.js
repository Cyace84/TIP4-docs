import{t as a,d as w}from"./index.9965c97d.js";import{u as _,i as g}from"./useProviders.96dbce34.js";const b={ABIversion:2,version:"2.2",header:["pubkey","time","expire"],functions:[{name:"constructor",inputs:[],outputs:[]},{name:"sendTransaction",inputs:[{name:"dest",type:"address"},{name:"value",type:"uint128"},{name:"bounce",type:"bool"},{name:"flags",type:"uint8"},{name:"payload",type:"cell"}],outputs:[]},{name:"transferOwnership",inputs:[{name:"newOwner",type:"uint256"}],outputs:[]},{name:"owner",inputs:[],outputs:[{name:"owner",type:"uint256"}]},{name:"_randomNonce",inputs:[],outputs:[{name:"_randomNonce",type:"uint256"}]}],data:[{key:1,name:"_randomNonce",type:"uint256"}],events:[{name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"uint256"},{name:"newOwner",type:"uint256"}],outputs:[]}],fields:[{name:"_pubkey",type:"uint256"},{name:"_timestamp",type:"uint64"},{name:"_constructorFlag",type:"bool"},{name:"owner",type:"uint256"},{name:"_randomNonce",type:"uint256"}]},v={ABIversion:2,version:"2.2",header:["pubkey","time","expire"],functions:[{name:"constructor",inputs:[{name:"codeNft",type:"cell"},{name:"ownerPubkey",type:"uint256"},{name:"json",type:"string"}],outputs:[]},{name:"mintNft",inputs:[{name:"json",type:"string"},{components:[{name:"numerator",type:"uint128"},{name:"denominator",type:"uint128"},{name:"receiver",type:"address"}],name:"royalty",type:"tuple"}],outputs:[]},{name:"setRemainOnNft",inputs:[{name:"remainOnNft",type:"uint128"}],outputs:[]},{name:"owner",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"uint256"}]},{name:"transferOwnership",inputs:[{name:"newOwner",type:"uint256"}],outputs:[]},{name:"getJson",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"json",type:"string"}]},{name:"totalSupply",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"count",type:"uint128"}]},{name:"nftCode",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"code",type:"cell"}]},{name:"nftCodeHash",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"codeHash",type:"uint256"}]},{name:"nftAddress",inputs:[{name:"answerId",type:"uint32"},{name:"id",type:"uint256"}],outputs:[{name:"nft",type:"address"}]},{name:"supportsInterface",inputs:[{name:"answerId",type:"uint32"},{name:"interfaceID",type:"uint32"}],outputs:[{name:"value0",type:"bool"}]}],data:[{key:1,name:"_randomNonce",type:"uint32"}],events:[{name:"OwnershipTransferred",inputs:[{name:"oldOwner",type:"uint256"},{name:"newOwner",type:"uint256"}],outputs:[]},{name:"NftCreated",inputs:[{name:"id",type:"uint256"},{name:"nft",type:"address"},{name:"owner",type:"address"},{name:"manager",type:"address"},{name:"creator",type:"address"}],outputs:[]},{name:"NftBurned",inputs:[{name:"id",type:"uint256"},{name:"nft",type:"address"},{name:"owner",type:"address"},{name:"manager",type:"address"}],outputs:[]}],fields:[{name:"_pubkey",type:"uint256"},{name:"_timestamp",type:"uint64"},{name:"_constructorFlag",type:"bool"},{name:"_supportedInterfaces",type:"optional(cell)"},{name:"_codeNft",type:"cell"},{name:"_totalSupply",type:"uint128"},{name:"_json",type:"string"},{name:"owner_",type:"uint256"},{name:"_randomNonce",type:"uint32"},{name:"_remainOnNft",type:"uint128"}]},h={ABIversion:2,version:"2.2",header:["time"],functions:[{name:"constructor",inputs:[{name:"collection",type:"address"}],outputs:[]},{name:"getInfo",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"collection",type:"address"},{name:"owner",type:"address"},{name:"nft",type:"address"}]},{name:"destruct",inputs:[{name:"gasReceiver",type:"address"}],outputs:[]}],data:[{key:1,name:"_nft",type:"address"}],events:[],fields:[{name:"_pubkey",type:"uint256"},{name:"_timestamp",type:"uint64"},{name:"_constructorFlag",type:"bool"},{name:"_nft",type:"address"},{name:"_collection",type:"address"},{name:"_owner",type:"address"}]},I={ABIversion:2,version:"2.2",header:["time"],functions:[{name:"constructor",inputs:[],outputs:[]},{name:"getInfo",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"collection",type:"address"}]},{name:"destruct",inputs:[{name:"gasReceiver",type:"address"}],outputs:[]}],data:[{key:1,name:"_collection",type:"address"}],events:[],fields:[{name:"_pubkey",type:"uint256"},{name:"_timestamp",type:"uint64"},{name:"_constructorFlag",type:"bool"},{name:"_collection",type:"address"}]},N={ABIversion:2,version:"2.2",header:["pubkey","time","expire"],functions:[{name:"constructor",inputs:[{name:"owner",type:"address"},{name:"sendGasTo",type:"address"},{name:"remainOnNft",type:"uint128"},{name:"json",type:"string"},{components:[{name:"numerator",type:"uint128"},{name:"denominator",type:"uint128"},{name:"receiver",type:"address"}],name:"royalty",type:"tuple"}],outputs:[]},{name:"royaltyInfo",inputs:[{name:"answerId",type:"uint32"},{name:"salePrice",type:"uint128"}],outputs:[{name:"receiver",type:"address"},{name:"royaltyAmount",type:"uint128"}]},{name:"getJson",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"json",type:"string"}]},{name:"transfer",inputs:[{name:"to",type:"address"},{name:"sendGasTo",type:"address"},{components:[{name:"value",type:"uint128"},{name:"payload",type:"cell"}],name:"callbacks",type:"map(address,tuple)"}],outputs:[]},{name:"changeOwner",inputs:[{name:"newOwner",type:"address"},{name:"sendGasTo",type:"address"},{components:[{name:"value",type:"uint128"},{name:"payload",type:"cell"}],name:"callbacks",type:"map(address,tuple)"}],outputs:[]},{name:"changeManager",inputs:[{name:"newManager",type:"address"},{name:"sendGasTo",type:"address"},{components:[{name:"value",type:"uint128"},{name:"payload",type:"cell"}],name:"callbacks",type:"map(address,tuple)"}],outputs:[]},{name:"getInfo",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"id",type:"uint256"},{name:"owner",type:"address"},{name:"manager",type:"address"},{name:"collection",type:"address"}]},{name:"supportsInterface",inputs:[{name:"answerId",type:"uint32"},{name:"interfaceID",type:"uint32"}],outputs:[{name:"value0",type:"bool"}]}],data:[{key:1,name:"_id",type:"uint256"}],events:[{name:"NftCreated",inputs:[{name:"id",type:"uint256"},{name:"owner",type:"address"},{name:"manager",type:"address"},{name:"collection",type:"address"}],outputs:[]},{name:"OwnerChanged",inputs:[{name:"oldOwner",type:"address"},{name:"newOwner",type:"address"}],outputs:[]},{name:"ManagerChanged",inputs:[{name:"oldManager",type:"address"},{name:"newManager",type:"address"}],outputs:[]},{name:"NftBurned",inputs:[{name:"id",type:"uint256"},{name:"owner",type:"address"},{name:"manager",type:"address"},{name:"collection",type:"address"}],outputs:[]}],fields:[{name:"_pubkey",type:"uint256"},{name:"_timestamp",type:"uint64"},{name:"_constructorFlag",type:"bool"},{name:"_supportedInterfaces",type:"optional(cell)"},{name:"_id",type:"uint256"},{name:"_collection",type:"address"},{name:"_owner",type:"address"},{name:"_manager",type:"address"},{name:"_json",type:"string"},{components:[{name:"numerator",type:"uint128"},{name:"denominator",type:"uint128"},{name:"receiver",type:"address"}],name:"_royalty",type:"tuple"}]},l={Account:b,Collection:v,Index:h,IndexBasis:I,Nft:N},k=JSON.stringify({type:"Basic NFT",name:"Daemon #1",description:"A curated collection of 10,000 Agents from the Venom blockchain deployed on a mission to take over Web3",preview:{source:"https://images.pexels.com/photos/16115934/pexels-photo-16115934/free-photo-of-spooky-traditional-figurine.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",mimetype:"image/JPEG"},files:[{source:"https://images.pexels.com/photos/16115934/pexels-photo-16115934/free-photo-of-spooky-traditional-figurine.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",mimetype:"image/JPEG"}],external_url:"https://images.pexels.com",image:"/1.jpeg",attributes:[{trait_type:"Background",value:"Orange 2"},{trait_type:"Skin Color",value:"Lightskin 2"},{trait_type:"Apparel",value:"Vest"},{trait_type:"Eyes",value:"Werewolf"},{trait_type:"Mask",value:"Villain"},{trait_type:"Hair",value:"Prettyboy 2"},{trait_type:"Rarity Rank",value:6001,display_type:"number"}]}),x=JSON.stringify({type:"Basic NFT",name:"Revolt Agents",description:"A curated collection of 10,000 Agents from the Venom blockchain deployed on a mission to take over Web3",preview:{source:"https://images.pexels.com/photos/16115934/pexels-photo-16115934/free-photo-of-spooky-traditional-figurine.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",mimetype:"image/JPEG"},files:[{source:"https://images.pexels.com/photos/16115934/pexels-photo-16115934/free-photo-of-spooky-traditional-figurine.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",mimetype:"image/JPEG"}],external_url:"https://venom.network"});async function S(i=x){try{const[e,p]=await _(),t=l.Collection,m=(await e.getFullContractState({address:p})).state,d=await e.extractPublicKey(m.boc),c=await(await fetch("/scripts/artifacts/build_royalty/Collection.base64")).text(),s=await(await fetch("/scripts/artifacts/build_royalty/Nft.base64")).text(),y=(await e.splitTvc(s)).code,n={tvc:c,workchain:0,publicKey:d,initParams:{_randomNonce:Math.random()*6400|0}},o=await e.getExpectedAddress(t,n),u=await e.getStateInit(t,n);u.stateInit,await e.sendMessage({sender:p,recipient:o,amount:String(2*10**9),bounce:!1,stateInit:u.stateInit});const r=new e.Contract(t,o),{transaction:f}=await r.methods.constructor({codeNft:y,ownerPubkey:`0x${n.publicKey}`,json:i}).sendExternal({stateInit:u.stateInit,publicKey:n.publicKey});return(await r.methods.totalSupply({answerId:0}).call()).count=="0"?(a("Collection deployed successfully",1),`TIP4_1 collection deployed to ${o.toString()}`):(a("Collection deployment failed",0),`TIP4_1 collection deployment failed ! ${f.exitCode,f.resultCode}`)}catch(e){return a(e.message,0),e.message}}async function P(i,e,p=k){try{const[t,m]=await _();if(!g(t,i))return a("Please enter a valid collection address !",0),"Failed";if(!g(t,e.receiver))return a("Please enter a valid royalty receiver address !",0),"Failed";const d=l.Collection,c=l.Nft,s=new t.Contract(d,new w.Address(i));s.getFullState;const y=Number((await s.methods.totalSupply({answerId:0}).call()).count),n=await s.methods.mintNft({json:p,royalty:{numerator:e.numerator,denominator:e.denominator,receiver:new w.Address(e.receiver)}}).send({from:m,amount:String(2*10**9),bounce:!0});if(n.aborted)return`minting Nft failed ${n.exitCode,n.resultCode}`;const o=(await s.methods.nftAddress({answerId:0,id:y}).call()).nft,r=await new t.Contract(c,o).methods.getInfo({answerId:0}).call();return r.collection.toString()==i.toString()?(a(`Nft number ${r.id} Minted successfully`,1),`Nft number ${r.id} deployed to ${o.toString()}`):(a("Minting Nft failed",0),`TIP4_1 Nft deployment failed ! ${n.exitCode,n.resultCode}`)}catch(t){return a(t.message,0),t.message}}export{P as a,S as d};
